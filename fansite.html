<!DOCTYPE html>
<html lang="ja">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>ã€éå…¬å¼ã€‘ãƒ‰ã‚ºãƒ«ç¤¾ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹</title>

<style>
body{
margin:0;
font-family:Arial, sans-serif;
background:#f4f4f4;
color:#222;
}

/* å›ºå®šãƒŠãƒ“ */
header{
position:fixed;
top:0;
width:100%;
background:#d90000; /* èµ¤ã«å¤‰æ›´ */
color:white;
padding:15px 20px 5px 20px;
z-index:1000;
}

header .title{
font-size:18px;
font-weight:bold;
}

nav button{
background:none;
border:none;
color:white;
margin-left:15px;
cursor:pointer;
font-size:14px;
}

nav button:hover{
color:#ff3b3b;
}

main{
margin-top:110px;
padding:20px;
}

.section{ display:none; }
.active{ display:block; }

.card{
background:white;
padding:20px;
margin-bottom:20px;
border-left:6px solid #ff3b3b;
box-shadow:0 2px 8px rgba(0,0,0,0.05);
}

.event-img,.goods-img{
width:140px;
margin:10px 0;
border-radius:6px;
}

.event-btn{
background:#ff3b3b;
color:white;
border:none;
padding:6px 10px;
cursor:pointer;
border-radius:4px;
margin-top:8px;
}

.event-btn:hover{
background:#cc0000;
}

.countdown{
font-weight:bold;
color:#ff3b3b;
margin-top:10px;
}

footer{
background:#111;
color:#ccc;
padding:20px;
font-size:13px;
text-align:center;
margin-top:40px;
}

.topnav{
margin-top:10px;
text-align:center;
}

.topnav button{
background:none;
border:none;
color:white;
margin:0 10px;
cursor:pointer;
font-size:14px;
font-weight:bold;
}

.topnav button:hover{
text-decoration:underline;
}

.guide-box{
background:#fff5f5;
padding:20px;
border-left:6px solid #d90000;
margin-bottom:30px;
box-shadow:0 2px 8px rgba(0,0,0,0.05);
}

.feature-card{
background:white;
padding:20px;
margin-bottom:15px;
border-left:6px solid #111;
box-shadow:0 2px 8px rgba(0,0,0,0.05);
}

.feature-card h3{
margin-top:0;
color:#d90000;
}

.countdown{
animation: pulse 1.5s infinite;
}

@keyframes pulse{
0%{opacity:1;}
50%{opacity:0.6;}
100%{opacity:1;}
}

</style>
</head>

<body>

<header>
<div class="title">ã€éå…¬å¼ã€‘ãƒ‰ã‚ºãƒ«ç¤¾ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹</div>

<nav class="topnav">
<button onclick="showSection('home')">ãƒ›ãƒ¼ãƒ </button>
<button onclick="showSection('event')">ã‚¤ãƒ™ãƒ³ãƒˆ</button>
<button onclick="showSection('goods')">ã‚°ãƒƒã‚º</button>
<button onclick="showSection('member')">ãƒ¡ãƒ³ãƒãƒ¼</button>
<button onclick="showSection('guide')">ä½¿ã„æ–¹</button>
</nav>
</header>
<main>

<div id="home" class="section active">
<div id="todayBox" class="card"></div>

<h2>æœ€æ–°ã‚¤ãƒ™ãƒ³ãƒˆ</h2>
<div id="latestEvent" class="card"></div>

<h3>ã‚ãªãŸã®å‚åŠ äºˆå®šã‚¤ãƒ™ãƒ³ãƒˆ</h3>
<div id="myEvents"></div>
</div>

<div id="event" class="section">
<h2>ã‚¤ãƒ™ãƒ³ãƒˆæƒ…å ±</h2>
<div id="eventList"></div>
</div>

<div id="goods" class="section">
<h2>ã‚°ãƒƒã‚ºæƒ…å ±</h2>
<div id="goodsList"></div>
</div>

<div id="member" class="section">
<h2>ãƒ¡ãƒ³ãƒãƒ¼æƒ…å ±</h2>
<div class="card"><h3>ãƒ‰ã‚ºãƒ«</h3><p>ãƒ­ã‚¸ã‚«ãƒ«ã‚´ãƒªãƒ©ç¤¾é•·</p></div>
<div class="card"><h3>ã¼ã‚“ã˜ã‚…ã†ã‚‹</h3><p>ï¼ˆå¿ƒã‚„ã•ã—ã„ï¼‰å‘æ€¯è€…</p></div>
<div class="card"><h3>ãŠã‚“ã‚Šãƒ¼</h3><p>ã‚¹ãƒ”ãƒ¼ãƒ‰ã‚¹ã‚¿ãƒ¼</p></div>
<div class="card"><h3>ãŠã‚‰ãµãã‚“</h3><p>ã‚ãªãŸã®å¿ƒã‚’ç‹™ã„æ’ƒã¡</p></div>
<div class="card"><h3>ãŠãŠã¯ã‚‰MEN</h3><p>ã‚ºãƒœãƒ©ãªåŒ </p></div>
</div>

<div id="guide" class="section">
<h2>ã“ã®ã‚µã‚¤ãƒˆã«ã¤ã„ã¦</h2>

<div class="guide-box">
<p>
ã“ã®ã‚µã‚¤ãƒˆã¯ã€éå…¬å¼ãƒ•ã‚¡ãƒ³ã‚µã‚¤ãƒˆã§ã™ã€‚
</p>
<p>
ã‚¤ãƒ™ãƒ³ãƒˆã‚„ã‚°ãƒƒã‚ºæƒ…å ±ã‚’ãƒ”ãƒƒã‚¯ã‚¢ãƒƒãƒ—ã—ã€å‹•ç”»ã‚„ç”¨èªã‚’ãƒ©ãƒ³ãƒ€ãƒ è¡¨ç¤ºã™ã‚‹ã“ã¨ã§ã€
ãƒ‰ã‚ºãƒ«ç¤¾ã‚’ã‚‚ã£ã¨æ¥½ã—ã‚ã‚‹ã“ã¨ã‚’ç›®çš„ã¨ã—ã¦ã„ã¾ã™ã€‚
</p>
</div>

<h2 style="margin-top:40px;">ä¸»ãªæ©Ÿèƒ½</h2>

<div class="feature-card">
<h3>ğŸ” ä»Šæ—¥ã®ãƒ‰ã‚ºãƒ«ç¤¾ï¼ˆãƒ›ãƒ¼ãƒ ã‚¿ãƒ–ï¼‰</h3>
<p>ãŠã™ã™ã‚ã®å‹•ç”»ã¾ãŸã¯ç”¨èªã‚’ãƒ©ãƒ³ãƒ€ãƒ ã§1ä»¶è¡¨ç¤ºã—ã¾ã™ã€‚</p>
<p>ãƒšãƒ¼ã‚¸ã‚’è¨ªã‚Œã‚‹ãŸã³ã«å¤‰ã‚ã‚Šã¾ã™ã€‚</p>
</div>

<div class="feature-card">
<h3>â³ ã‚«ã‚¦ãƒ³ãƒˆãƒ€ã‚¦ãƒ³æ©Ÿèƒ½ï¼ˆãƒ›ãƒ¼ãƒ ã‚¿ãƒ–ï¼‰</h3>
<p>ç›´è¿‘ã‚¤ãƒ™ãƒ³ãƒˆã¾ã§ã®æ®‹ã‚Šæ™‚é–“ã‚’è‡ªå‹•è¡¨ç¤ºã—ã¾ã™ã€‚</p>
</div>

<div class="feature-card">
<h3>ğŸ“… ã‚¤ãƒ™ãƒ³ãƒˆæƒ…å ±ï¼ˆã‚°ãƒƒã‚ºã‚¿ãƒ–ï¼‰</h3>
<p>ã‚¤ãƒ™ãƒ³ãƒˆæƒ…å ±ã‚’ãƒ”ãƒƒã‚¯ã‚¢ãƒƒãƒ—ã—ã¦è¡¨ç¤ºã—ã¾ã™ã€‚</p>
<p>
ã‚¤ãƒ™ãƒ³ãƒˆæƒ…å ±ã®ä¸‹ã«ã‚ã‚‹ã€Œå‚åŠ äºˆå®šã«ã™ã‚‹ã€ãƒœã‚¿ãƒ³ã‚’æŠ¼ã™ã¨ã€è‡ªåˆ†ã ã‘ã®å‚åŠ äºˆå®šä¸€è¦§ã«ä¿å­˜ã•ã‚Œã€
ãƒ›ãƒ¼ãƒ ã‚¿ãƒ–ã®ã€Œã‚ãªãŸã®å‚åŠ äºˆå®šã‚¤ãƒ™ãƒ³ãƒˆã€æ¬„ã§ç¢ºèªã§ãã¾ã™ã€‚
</p>
</div>

<div class="feature-card">
<h3>ğŸ›ï¸ ã‚°ãƒƒã‚ºæƒ…å ±ï¼ˆã‚°ãƒƒã‚ºã‚¿ãƒ–ï¼‰</h3>
<p>ã‚°ãƒƒã‚ºæƒ…å ±ã‚’ãƒ”ãƒƒã‚¯ã‚¢ãƒƒãƒ—ã—ã¦è¡¨ç¤ºã—ã¾ã™ã€‚</p>
</div>

</div>
</main>

<footer>
ã“ã¡ã‚‰ã®ã‚µã‚¤ãƒˆã¯éå…¬å¼ãƒ•ã‚¡ãƒ³ã‚µã‚¤ãƒˆã§ã™ã€‚<br>
ã‚¤ãƒ™ãƒ³ãƒˆãƒ»ã‚°ãƒƒã‚ºæƒ…å ±ã¯æ‰‹å‹•ã§è¿½åŠ ã—ã¦ã„ã¾ã™ã€‚<br>
æœ€æ–°ãƒ»è©³ç´°æƒ…å ±ã¯ãƒ‰ã‚ºãƒ«ç¤¾å…¬å¼ã‚µã‚¤ãƒˆ(https://www.dozle.jp/)ã‚’ã”è¦§ãã ã•ã„ã€‚<br><br>
æ²è¼‰ã—ã¦ã„ã‚‹åç§°ãƒ»ç”»åƒç­‰ã®æ¨©åˆ©ã¯å„æ¨©åˆ©è€…æ§˜ã«å¸°å±ã—ã¾ã™ã€‚<br>
å•é¡ŒãŒã‚ã‚‹å ´åˆã¯å‰Šé™¤ç­‰å¯¾å¿œã„ãŸã—ã¾ã™ã€‚
</footer>

<script>
function showSection(id){
document.querySelectorAll('.section').forEach(s=>s.classList.remove('active'));
document.getElementById(id).classList.add('active');
}

const eventsURL="https://docs.google.com/spreadsheets/d/e/2PACX-1vQeScX6j_3nRvOlYuVa0P4wGG6piBpQ2ZwXzZxEPscII79uBByy9Z8_MDND2wouDZboQQon7XVVN4Gp/pub?gid=0&single=true&output=csv";
const goodsURL="https://docs.google.com/spreadsheets/d/e/2PACX-1vQeScX6j_3nRvOlYuVa0P4wGG6piBpQ2ZwXzZxEPscII79uBByy9Z8_MDND2wouDZboQQon7XVVN4Gp/pub?gid=1794976478&single=true&output=csv";
const videosURL="https://docs.google.com/spreadsheets/d/e/2PACX-1vQeScX6j_3nRvOlYuVa0P4wGG6piBpQ2ZwXzZxEPscII79uBByy9Z8_MDND2wouDZboQQon7XVVN4Gp/pub?gid=594878538&single=true&output=csv";
const wordsURL="https://docs.google.com/spreadsheets/d/e/2PACX-1vQeScX6j_3nRvOlYuVa0P4wGG6piBpQ2ZwXzZxEPscII79uBByy9Z8_MDND2wouDZboQQon7XVVN4Gp/pub?gid=1791332374&single=true&output=csv";

function parseCSV(text){
const rows=text.trim().split("\n");
const headers=rows.shift().split(",");
return rows.map(row=>{
const values=row.match(/(".*?"|[^",]+)(?=\s*,|\s*$)/g);
return headers.reduce((obj,header,i)=>{
obj[header.trim()]=values?values[i]?.replace(/^"|"$/g,""):"";
return obj;
},{});
});
}

function formatDate(dateStr){
const d=new Date(dateStr);
return `${d.getFullYear()}å¹´${d.getMonth()+1}æœˆ${d.getDate()}æ—¥`;
}

function loadTodayContent(){
const category=Math.random()<0.5?"video":"word";
if(category==="video"){
fetch(videosURL).then(r=>r.text()).then(text=>{
const data=parseCSV(text);
if(!data.length)return;
const random=data[Math.floor(Math.random()*data.length)];
todayBox.innerHTML=
`<h3>ğŸŒŸ ä»Šæ—¥ã®ãƒ‰ã‚ºãƒ«ç¤¾ã€å‹•ç”»ã€‘</h3>
<p><strong>${random.title}</strong></p>
<p><a href="${random.url}" target="_blank">â–¶ å‹•ç”»ã‚’è¦‹ã‚‹</a></p>`;
});
}else{
fetch(wordsURL).then(r=>r.text()).then(text=>{
const data=parseCSV(text);
if(!data.length)return;
const random=data[Math.floor(Math.random()*data.length)];
todayBox.innerHTML=
`<h3>ğŸŒŸ ä»Šæ—¥ã®ãƒ‰ã‚ºãƒ«ç¤¾ã€ç”¨èªã€‘</h3>
<p><strong>${random.word}</strong></p>
<p>${random.description}</p>`;
});
}
}

let myEvents=JSON.parse(localStorage.getItem("myEvents")||"[]");

function toggleEvent(title){
if(myEvents.includes(title)){
myEvents=myEvents.filter(e=>e!==title);
}else{
myEvents.push(title);
}
localStorage.setItem("myEvents",JSON.stringify(myEvents));
location.reload();
}

function renderMyEvents(){
if(!myEvents.length){
myEventsDiv.innerHTML="<p>ã¾ã å‚åŠ äºˆå®šã¯ã‚ã‚Šã¾ã›ã‚“ã€‚</p>";
return;
}
myEventsDiv.innerHTML=myEvents.map(e=>`<div class="card">${e}</div>`).join("");
}

const myEventsDiv=document.getElementById("myEvents");
const todayBox=document.getElementById("todayBox");

fetch(eventsURL).then(r=>r.text()).then(text=>{
const data=parseCSV(text);
data.sort((a,b)=>new Date(b.start_date)-new Date(a.start_date));

let nearest=null;
let nearestTime=Infinity;

data.forEach(event=>{
const start=new Date(event.start_date);
const eventTime=start.getTime();
const dateText=event.start_date===event.end_date
? formatDate(event.start_date)
: `${formatDate(event.start_date)}ã€œ${formatDate(event.end_date)}`;

const joined=myEvents.includes(event.title);
const btnText=joined?"å‚åŠ äºˆå®šâœ”":"å‚åŠ äºˆå®šã«ã™ã‚‹";

eventList.innerHTML+=
`<div class="card">
<h3>${event.title}</h3>
<img src="${event.image}" class="event-img">
<p>ğŸ“… ${dateText}</p>
<p>ğŸ“ ${event.location}</p>
<p>${event.note}</p>
<button class="event-btn" onclick="toggleEvent('${event.title}')">${btnText}</button>
</div>`;

if(eventTime>Date.now()&&eventTime<nearestTime){
nearestTime=eventTime;
nearest=event;
}
});

if(nearest){
latestEvent.innerHTML=
`<p class="countdown" id="countdown"></p>
<h3>${nearest.title}</h3>
<img src="${nearest.image}" class="event-img">
<p>ğŸ“… ${formatDate(nearest.start_date)}</p>
<p>ğŸ“ ${nearest.location}</p>
<p>${nearest.note}</p>`;
startCountdown(nearest.start_date);
}

renderMyEvents();
});

fetch(goodsURL).then(r=>r.text()).then(text=>{
const data=parseCSV(text);
data.forEach(item=>{
goodsList.innerHTML+=
`<div class="card">
<h3>${item.name}</h3>
<img src="${item.image}" class="goods-img">
<p>ğŸ’° ${item.price}å††</p>
<p>${item.description}</p>
</div>`;
});
});

function startCountdown(eventDateStr){

// æ—¥æœ¬æ™‚é–“ã®0:00ã«è¨­å®š
const eventDate = new Date(eventDateStr + "T00:00:00+09:00");

setInterval(()=>{
const now = new Date();
const diff = eventDate - now;

if(diff <= 0){
document.getElementById("countdown").innerHTML = "ğŸ”¥ æœ¬æ—¥é–‹å‚¬ï¼";
return;
}

const days = Math.floor(diff / 86400000);
const hours = Math.floor((diff % 86400000) / 3600000);
const minutes = Math.floor((diff % 3600000) / 60000);
const seconds = Math.floor((diff % 60000) / 1000);

document.getElementById("countdown").innerHTML =
`â³ ã‚ã¨ ${days}æ—¥ ${hours}æ™‚é–“ ${minutes}åˆ† ${seconds}ç§’ ã§é–‹å‚¬ï¼`;

},1000);
}

loadTodayContent();
</script>

</body>
</html>


