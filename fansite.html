<!DOCTYPE html>
<html lang="ja">
<head>
<link href="https://fonts.googleapis.com/css2?family=Material+Symbols+Outlined" rel="stylesheet" />
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>ã€éå…¬å¼ã€‘ãƒ‰ã‚ºãƒ«ç¤¾ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹</title>

<style>
body{
  margin:0;

  background:
    radial-gradient(circle at 10% 20%, rgba(181,0,18,0.06), transparent 40%),
    radial-gradient(circle at 90% 80%, rgba(181,0,18,0.05), transparent 40%),
    linear-gradient(135deg, #f4f6f9 0%, #e9edf3 100%);

  font-family: sans-serif;
}
  
.logo{
display:flex;
align-items:center;
gap:10px;
font-weight:bold;
font-size:18px;
}

.site-icon{
width:28px;
height:28px;
object-fit:contain;
}
/* ===== ãƒ˜ãƒƒãƒ€ãƒ¼å…¨ä½“ ===== */
.main-header{
position:fixed;
top:0;
width:100%;
background:#d90000;
color:white;
z-index:1000;
}

/* ä¸Šæ®µ */
.header-top{
display:flex;
justify-content:space-between;
align-items:center;
padding:12px 20px;
}

.logo{
font-weight:bold;
font-size:18px;
}

.header-icons button{
background:none;
border:none;
color:white;
cursor:pointer;
margin-left:15px;
}

.header-icons .material-symbols-outlined{
font-size:24px;
}

/* ä¸‹æ®µãƒŠãƒ“ */
.main-nav{
display:flex;
justify-content:space-around;
align-items:center;
padding:10px 0;
border-top:1px solid rgba(255,255,255,0.3);
}

/* éé¸æŠã‚¿ãƒ– */
.main-nav button{
background:none;
border:none;
color:rgba(255,255,255,0.7); /* è–„ã„ç™½ */
display:flex;
flex-direction:column;
align-items:center;
font-size:12px;
cursor:pointer;
padding:8px 16px;
position:relative;
}

/* ãƒ›ãƒãƒ¼ */
.main-nav button:hover{
color:white;
}

/* é¸æŠä¸­ã‚¿ãƒ– */
.main-nav button.active-tab{
color:white;
}

/* ç™½ã„ä¸‹ç·š */
.main-nav button.active-tab::after{
content:"";
position:absolute;
bottom:0;
left:20%;
width:60%;
height:3px;
background:white;
border-radius:2px;
}

.main-nav button span:last-child{
  white-space:nowrap;
}
  
.main-nav .material-symbols-outlined{
font-size:22px;
margin-bottom:2px;
}

.main-nav button:hover{
opacity:0.8;
}
  
header .title{
font-size:18px;
font-weight:bold;
}

main{
margin-top:140px;
padding:20px;
}

.section{ display:none; }
.active{ display:block; }

.card{
background:white;
padding:20px;
margin-bottom:20px;
border-left:6px solid #ff3b3b;
box-shadow:0 2px 8px rgba(0,0,0,0.05);
}

.event-img,.goods-img{
width:140px;
margin:10px 0;
border-radius:6px;
}

.event-btn{
  margin-top:15px;
  padding:12px 22px;
  border:none;
  border-radius:10px;
  font-weight:bold;
  cursor:pointer;
  background:#b50012;
  color:white;
  transition:0.3s;
}

.event-btn:hover{
  transform:translateY(-2px);
  box-shadow:0 5px 15px rgba(0,0,0,0.2);
}

.event-btn.joined{
  background:#0a8f2a;
}

.event-button-area{
  display:flex;
  gap:12px;
  flex-wrap:wrap;
  align-items:center;
  margin-top:18px;
}

.countdown{
font-weight:bold;
color:#ff3b3b;
margin-top:10px;
}

footer{
background:#111;
color:#ccc;
padding:20px;
font-size:13px;
text-align:center;
margin-top:40px;
}

.guide-box{
background:#fff5f5;
padding:20px;
border-left:6px solid #d90000;
margin-bottom:30px;
box-shadow:0 2px 8px rgba(0,0,0,0.05);
}

.feature-card{
background:white;
padding:20px;
margin-bottom:15px;
border-left:6px solid #111;
box-shadow:0 2px 8px rgba(0,0,0,0.05);
}

.feature-card h3{
margin-top:0;
color:#d90000;
}

/* è¡¨ç¤ºåˆ‡ã‚Šæ›¿ãˆ */
.desktop-only{ display:flex; }
.mobile-only{ display:none; }

/* ãƒãƒ³ãƒãƒ¼ã‚¬ãƒ¼ */
.hamburger{
background:none;
border:none;
color:white;
cursor:pointer;
}

.hamburger .material-symbols-outlined{
font-size:28px;
}

/* ãƒ¢ãƒã‚¤ãƒ«ãƒ¡ãƒ‹ãƒ¥ãƒ¼ */
.mobile-menu{
display:none;
flex-direction:column;
background:#c40000;
padding:10px 0;
}

.mobile-menu button{
background:none;
border:none;
color:white;
padding:12px;
font-size:14px;
text-align:left;
cursor:pointer;
}

.mobile-menu button:hover{
background:rgba(255,255,255,0.1);
}

/* ã‚¹ãƒãƒ›æ™‚ */
@media (max-width:768px){

.desktop-only{
display:none;
}

.mobile-only{
display:block;
}

.main-nav{
justify-content:space-around;
display:flex;
}

.main-nav button{
flex:1;              /* â† ã“ã‚ŒãŒè¶…é‡è¦ */
padding:8px 4px;     /* æ¨ªä½™ç™½ã‚’æ¸›ã‚‰ã™ */
}

.main-nav button span:last-child{
font-size:11px;
white-space:nowrap;
}
}

.mobile-menu button{
display:flex;
align-items:center;
gap:10px;
font-size:16px;
padding:12px 15px;
width:100%;
background:none;
border:none;
color:white;
text-align:left;
}

.mobile-menu button .material-symbols-outlined{
font-size:20px;
}

.planned-card{
background:white;
padding:16px 18px;
margin-bottom:14px;
border-radius:12px;
box-shadow:0 4px 10px rgba(0,0,0,0.06);
transition:0.2s;
}

.planned-card:hover{
transform:translateY(-2px);
box-shadow:0 6px 18px rgba(0,0,0,0.1);
}

.planned-header{
display:flex;
justify-content:space-between;
align-items:center;
}

.planned-title{
font-weight:bold;
font-size:16px;
}

.planned-badge{
font-size:12px;
padding:4px 10px;
border-radius:999px;
color:white;
}

/* ã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹åˆ¥è‰² */
.planned-card[data-status="ã‚¢ã‚¤ãƒ‡ã‚¢"] .planned-badge{
background:#555;
}

.planned-card[data-status="æ¤œè¨ä¸­"] .planned-badge{
background:#777;
}

.planned-card[data-status="å®Ÿè£…äºˆå®š"] .planned-badge{
background:#b50012;
}

.planned-card[data-status="å®Ÿè£…æ¸ˆ"] .planned-badge{
background:#008800;
}

.planned-note{
margin-top:8px;
font-size:13px;
color:#555;
}

.planned-filter{
display:flex;
flex-wrap:wrap;
gap:8px;
margin-bottom:20px;
}

.filter-btn{
padding:6px 12px;
border-radius:999px;
border:none;
background:#eee;
cursor:pointer;
font-size:13px;
}

.filter-btn.active{
background:#b50012;
color:white;
}

.filter-btn:hover{
opacity:0.8;
}

.random-thumb{
display:block;
width:100%;
max-width:480px;
aspect-ratio:16/9;
object-fit:cover;
border-radius:12px;
margin:0 0 12px 0;
}

.random-card{
display:flex;
gap:20px;
align-items:flex-start;

background:#ffffff;
padding:24px;
border-radius:16px;

box-shadow:
  0 8px 24px rgba(0,0,0,0.12),
  0 2px 6px rgba(0,0,0,0.08);

border:1px solid rgba(0,0,0,0.06);

transition: all 0.3s ease;
}

.random-card:hover{
  transform: translateY(-4px);
  box-shadow:
    0 12px 32px rgba(0,0,0,0.18),
    0 4px 10px rgba(0,0,0,0.12);
}
  
.random-thumb-box{
flex:0 0 260px;
}

.random-thumb{
width:100%;
border-radius:12px;
object-fit:cover;
aspect-ratio:16/9;
}

.random-content{
  flex:1;
  min-width:0; 
}

.random-title{
  font-size:18px;
  font-weight:bold;
  margin:0 0 8px 0;
}

.random-heading{
  white-space:nowrap;
  font-size: clamp(16px, 4.5vw, 22px);
}
  
@media (max-width: 768px){

.random-card{
flex-direction:column;
}

.random-thumb-box{
flex:unset;
}

}

.latest-event-wrapper{
background:white;
padding:20px;
margin-bottom:20px;
border-left:6px solid #ff3b3b;
box-shadow:0 2px 8px rgba(0,0,0,0.05);
}

.event-countdown{
  color:#ff2b2b;
  font-weight:800;

  font-size: clamp(16px, 3.5vw, 22px);  /* â† å°‘ã—æ§ãˆã‚ */

  margin-bottom:16px;
  letter-spacing:0.3px;

  white-space:nowrap;   /* â† æ”¹è¡Œã•ã›ãªã„ */
}

.event-card{
  background:#ffffff;
  padding:24px;
  border-radius:16px;

  display:flex;
  flex-direction:column;   /* â† ã¾ãšç¸¦ä¸¦ã³ã«ã™ã‚‹ */

  box-shadow:
    0 10px 28px rgba(0,0,0,0.15),
    0 4px 10px rgba(0,0,0,0.10);

  transition: all 0.3s ease;
}

.event-card-inner{
  display:flex;
  gap:24px;
  align-items:flex-start;
}
  
.event-thumb{
  width:260px;         /* â† PCã§ã®ç”»åƒã‚µã‚¤ã‚º */
  flex-shrink:0;
  border-radius:12px;
}

.event-meta{
  display:flex;
  align-items:center;
  gap:6px;
  margin:4px 0;
}

.meta-icon{
  font-size:18px;
  color:#666;
}

@media (max-width:768px){
  .event-card{
    flex-direction:column;   /* â† ç¸¦ã«æˆ»ã™ */
  }

  .event-card-inner{
    flex-direction:column;   /* â† ã“ã‚ŒãŒé‡è¦ï¼ */
  }

  .event-thumb{
    width:100%;              /* â† ã‚¹ãƒãƒ›ã§ã¯æ¨ªå¹…ã„ã£ã±ã„ */
  }
}
  
.event-card:hover{
  transform: translateY(-4px);
  box-shadow:
    0 12px 32px rgba(0,0,0,0.18),
    0 4px 10px rgba(0,0,0,0.12);
}

.goods-series-card{
  display:flex;
  gap:40px;
  align-items:center;

  background:white;
  padding:40px;
  border-radius:18px;

  box-shadow:0 10px 30px rgba(0,0,0,0.08);
  margin-bottom:50px;
}

.goods-series-image img{
  width:420px;
  border-radius:14px;
}

.goods-series-content{
  flex:1;
}

.goods-series-title{
  font-size:26px;
  font-weight:800;
  margin-bottom:15px;
}

.goods-series-description{
  margin-bottom:15px;
}

.goods-series-status{
  font-weight:700;
  margin-bottom:20px;
}

.goods-series-status.active{
  color:#0a8f2a;
}

.goods-series-status.ended{
  color:#666;
}

.goods-buttons{
  display:flex;
  gap:15px;
  flex-wrap:wrap;
}

.goods-btn{
  display:inline-block;
  background:#0b1026;
  color:white;
  padding:14px 28px;
  border-radius:12px;
  text-decoration:none;
  font-weight:bold;
  transition:0.3s;
}

.goods-btn:hover{
  transform:translateY(-3px);
  box-shadow:0 6px 18px rgba(0,0,0,0.2);
}

.goods-btn.sub{
  background:#555;
}

@media (max-width:768px){

  .goods-series-card{
    flex-direction:column;
    padding:25px;
    gap:20px;
  }

  .goods-series-image img{
    width:100%;
  }

  .goods-series-title{
    font-size:20px;
  }

}

.event-card-new{
  display:flex;
  gap:20px;
  background:white;
  padding:20px;
  border-radius:16px;
  box-shadow:0 6px 18px rgba(0,0,0,0.08);
  margin-bottom:20px;
}

.event-img-box{
  flex:0 0 220px;
}

.event-img-new{
  width:100%;
  border-radius:14px;
}

.event-info{
  flex:1;
}

.event-links{
  margin:10px 0;
}

.event-link-btn{
  display:inline-block;
  padding:8px 14px;
  background:black;
  color:white;
  border-radius:8px;
  text-decoration:none;
  margin-right:8px;
}

.event-link-btn.gray{
  background:#555;
}

.event-actions{
  display:flex;
  align-items:center;
  gap:12px;
  margin-top:10px;
}

.fav-btn{
  padding:8px 12px;
  border-radius:8px;
  border:1px solid #ccc;
  background:white;
  cursor:pointer;
  height:38px;
}

.fav-btn.active{
  background:#ff4d6d;
  color:white;
  border:none;
}

.event-status{
  padding:8px 12px;      /* â† ãŠæ°—ã«å…¥ã‚Šã¨åŒã˜ä½™ç™½ */
  border-radius:8px;
  border:1px solid #ccc;
  font-size:14px;
  height:38px;           /* â† é«˜ã•ã‚’å›ºå®š */
  box-sizing:border-box;
}

@media(max-width:768px){
  .event-card-new{
    flex-direction:column;
  }

  .event-img-box{
    flex:none;
  }
}

.mylist-filter{
  margin:15px 0;
}

.mylist-card{
  background:white;
  padding:15px;
  border-radius:12px;
  margin-bottom:12px;
  box-shadow:0 4px 10px rgba(0,0,0,0.05);
}

.latest-flex{
  display:flex;
  gap:24px;
  align-items:center;
  flex-wrap:wrap;
}

.latest-thumb{
  width:260px;
  border-radius:16px;
}

.latest-meta{
  flex:1;
}

.latest-title{
  margin-top:0;
  margin-bottom:12px;
}

.meta-row{
  display:flex;
  align-items:center;
  gap:8px;
  margin:6px 0;
}

.latest-note{
  margin-top:14px;
  font-size:13px;
  color:#777;
}
  
.countdown-icon{
  font-size:22px;
  vertical-align:middle;
  margin-right:6px;
  color:#e60023; /* ã‚«ã‚¦ãƒ³ãƒˆãƒ€ã‚¦ãƒ³ã¨åŒã˜èµ¤ */
}

#countdown{
  font-weight:bold;
  font-size:22px;
  color:#e60023;
  display:flex;
  align-items:center;
  gap:6px;
}

.latest-wrapper{
  background:white;
  border-left:6px solid #e60023;
  padding:24px;
  border-radius:16px;
  box-shadow:0 8px 20px rgba(0,0,0,0.08);
}
  
.latest-countdown{
  font-size:22px;
  font-weight:bold;
  color:#e60023;
  display:flex;
  align-items:center;
  gap:8px;
  margin-bottom:20px;
}

#latestEvent .latest-wrapper{
  border-left:6px solid #ff8800;
}

#latestEvent .latest-countdown{
  color:#ff8800;
}

#latestEvent .countdown-icon{
  color:#ff8800;
}

.goods-meta{
  display:flex;
  align-items:center;
  gap:6px;
  margin:6px 0;
  font-size:14px;
}

.goods-series-status{
  display:inline-block;
  margin-top:10px;
  padding:6px 12px;
  border-radius:8px;
  font-weight:bold;
}

.status-è²©å£²å‰{
  background:#ccc;
  color:white;
}

.status-è²©å£²ä¸­{
  background:#00a000;
  color:white;
}

.status-è²©å£²çµ‚äº†{
  background:#666;
  color:white;
}
  
</style>
</head>

<body>

<header class="main-header">

  <!-- ä¸Šæ®µ -->
  <div class="header-top">
    <div class="logo">
      <img src="icon2.png" class="site-icon">
      <span>ãƒ‰ã‚ºãƒ«ç¤¾ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹</span>
    </div>

    <!-- PCç”¨ã‚¢ã‚¤ã‚³ãƒ³ -->
    <div class="header-icons desktop-only">
      <button onclick="showSection('guide')">
        <span class="material-symbols-outlined">help</span>
      </button>
      <button onclick="showSection('contact')">
        <span class="material-symbols-outlined">mail</span>
      </button>
      <button onclick="showSection('planned')">
        <span class="material-symbols-outlined">build</span>
      </button>
    </div>

    <!-- ã‚¹ãƒãƒ›ç”¨ãƒãƒ³ãƒãƒ¼ã‚¬ãƒ¼ -->
    <button class="hamburger mobile-only" onclick="toggleMenu()">
      <span class="material-symbols-outlined">menu</span>
    </button>
  </div>

  <!-- ã‚¹ãƒãƒ›ç”¨ãƒ¡ãƒ‹ãƒ¥ãƒ¼ -->
  <div id="mobileMenu" class="mobile-menu">

    <button onclick="showSection('guide'); toggleMenu()">
      <span class="material-symbols-outlined">help</span>
      ä½¿ã„æ–¹
    </button>

    <button onclick="showSection('contact'); toggleMenu()">
      <span class="material-symbols-outlined">mail</span>
      ãŠå•ã„åˆã‚ã›
    </button>

    <button onclick="showSection('planned'); toggleMenu()">
      <span class="material-symbols-outlined">build</span>
      ç¾åœ¨æ¤œè¨ä¸­ã®æ©Ÿèƒ½
    </button>

  </div>

  <!-- ä¸‹æ®µãƒ¡ã‚¤ãƒ³ãƒŠãƒ“ -->
  <nav class="main-nav">
   <button onclick="showSection('home')" data-section="home" class="active-tab">
      <span class="material-symbols-outlined">home</span>
      <span>ãƒ›ãƒ¼ãƒ </span>
    </button>

    <button onclick="showSection('event')" data-section="event">
      <span class="material-symbols-outlined">event</span>
      <span>ã‚¤ãƒ™ãƒ³ãƒˆ</span>
    </button>

    <button onclick="showSection('goods')" data-section="goods">
      <span class="material-symbols-outlined">shopping_bag</span>
      <span>ã‚°ãƒƒã‚º</span>
    </button>

    <button onclick="showSection('mylist')" data-section="mylist">
      <span class="material-symbols-outlined">bookmark</span>
      <span>ãƒã‚¤ãƒªã‚¹ãƒˆ</span>
    </button>
    
    <button onclick="showSection('about')" data-section="about">
      <span class="material-symbols-outlined">menu_book</span>
      <span>ãƒ‰ã‚ºãƒ«ç¤¾</span>
    </button>
  </nav>

</header>
<main>

<div id="home" class="section active">
<div id="todayBox" class="card"></div>

<h2>æœ€æ–°ã‚¤ãƒ™ãƒ³ãƒˆ</h2>
<div id="latestEvent"></div>

<h2>çµ‚äº†é–“è¿‘ã‚¤ãƒ™ãƒ³ãƒˆ</h2>
<div id="endingSoonEvent"></div>

</div>

<div id="event" class="section">
<h2>ã‚¤ãƒ™ãƒ³ãƒˆæƒ…å ±</h2>
<div id="eventList"></div>
</div>

<div id="goods" class="section">
<h2>ã‚°ãƒƒã‚ºæƒ…å ±</h2>
<div id="goodsList"></div>
</div>

<div id="mylist" class="section">

  <h2>ãƒã‚¤ãƒªã‚¹ãƒˆ</h2>

  <div class="mylist-filter">
    <button onclick="filterMyList('all')" class="filter-btn active">ã™ã¹ã¦</button>
    <button onclick="filterMyList('fav')" class="filter-btn">ãŠæ°—ã«å…¥ã‚Š</button>
    <button onclick="filterMyList('äºˆå®š')" class="filter-btn">å‚åŠ äºˆå®š</button>
    <button onclick="filterMyList('æ¸ˆ')" class="filter-btn">å‚åŠ æ¸ˆ</button>
  </div>

  <p id="mylist-count"></p>

  <div id="mylist-container"></div>

</div>

<div id="about" class="section">
<h2>ãƒ¡ãƒ³ãƒãƒ¼æƒ…å ±</h2>
<div class="card"><h3>ãƒ‰ã‚ºãƒ«</h3><p>ãƒ­ã‚¸ã‚«ãƒ«ã‚´ãƒªãƒ©ç¤¾é•·</p></div>
<div class="card"><h3>ã¼ã‚“ã˜ã‚…ã†ã‚‹</h3><p>ï¼ˆå¿ƒã‚„ã•ã—ã„ï¼‰å‘æ€¯è€…</p></div>
<div class="card"><h3>ãŠã‚“ã‚Šãƒ¼</h3><p>ã‚¹ãƒ”ãƒ¼ãƒ‰ã‚¹ã‚¿ãƒ¼</p></div>
<div class="card"><h3>ãŠã‚‰ãµãã‚“</h3><p>ã‚ãªãŸã®å¿ƒã‚’ç‹™ã„æ’ƒã¡</p></div>
<div class="card"><h3>ãŠãŠã¯ã‚‰MEN</h3><p>ã‚ºãƒœãƒ©ãªåŒ </p></div>
</div>

<div id="guide" class="section">
<h2>ã“ã®ã‚µã‚¤ãƒˆã«ã¤ã„ã¦</h2>

<div class="guide-box">
<p>
ã“ã®ã‚µã‚¤ãƒˆã¯ã€éå…¬å¼ãƒ•ã‚¡ãƒ³ã‚µã‚¤ãƒˆã§ã™ã€‚
</p>
<p>
ã‚¤ãƒ™ãƒ³ãƒˆã‚„ã‚°ãƒƒã‚ºæƒ…å ±ã‚’ãƒ”ãƒƒã‚¯ã‚¢ãƒƒãƒ—ã—ã€å‹•ç”»ã‚„ç”¨èªã‚’ãƒ©ãƒ³ãƒ€ãƒ è¡¨ç¤ºã™ã‚‹ã“ã¨ã§ã€
ãƒ‰ã‚ºãƒ«ç¤¾ã‚’ã‚‚ã£ã¨æ¥½ã—ã‚ã‚‹ã“ã¨ã‚’ç›®çš„ã¨ã—ã¦ã„ã¾ã™ã€‚
</p>
</div>

<h2 style="margin-top:40px;">ä¸»ãªæ©Ÿèƒ½</h2>

<div class="feature-card">
<h3>ğŸ” ãƒ©ãƒ³ãƒ€ãƒ ãƒ‰ã‚ºãƒ«ç¤¾ãƒ‡ãƒ¼ã‚¿ï¼ˆãƒ›ãƒ¼ãƒ ã‚¿ãƒ–ï¼‰</h3>
<p>ãŠã™ã™ã‚ã®å‹•ç”»ã¾ãŸã¯ç”¨èªã‚’ãƒ©ãƒ³ãƒ€ãƒ ã§1ä»¶è¡¨ç¤ºã—ã¾ã™ã€‚</p>
<p>ãƒšãƒ¼ã‚¸ã‚’è¨ªã‚Œã‚‹ãŸã³ã«å¤‰ã‚ã‚Šã¾ã™ã€‚</p>
</div>

<div class="feature-card">
<h3>â³ ã‚«ã‚¦ãƒ³ãƒˆãƒ€ã‚¦ãƒ³æ©Ÿèƒ½ï¼ˆãƒ›ãƒ¼ãƒ ã‚¿ãƒ–ï¼‰</h3>
<p>ç›´è¿‘ã‚¤ãƒ™ãƒ³ãƒˆã¾ã§ã®æ®‹ã‚Šæ™‚é–“ã‚’è‡ªå‹•è¡¨ç¤ºã—ã¾ã™ã€‚</p>
</div>

<div class="feature-card">
<h3>ğŸ“… ã‚¤ãƒ™ãƒ³ãƒˆæƒ…å ±</h3>
<p>ã‚¤ãƒ™ãƒ³ãƒˆæƒ…å ±ã‚’ãƒ”ãƒƒã‚¯ã‚¢ãƒƒãƒ—ã—ã¦è¡¨ç¤ºã—ã¾ã™ã€‚</p>
<p>ã‚¤ãƒ™ãƒ³ãƒˆæƒ…å ±ã®ä¸‹ã«ã‚ã‚‹ã€Œå‚åŠ äºˆå®šã«ã™ã‚‹ã€ãƒœã‚¿ãƒ³ã‚’æŠ¼ã™ã¨ã€è‡ªåˆ†ã ã‘ã®å‚åŠ äºˆå®šä¸€è¦§ã«ä¿å­˜ã•ã‚Œã€</p>
<p>ãƒ›ãƒ¼ãƒ ã‚¿ãƒ–ã®ã€Œã‚ãªãŸã®å‚åŠ äºˆå®šã‚¤ãƒ™ãƒ³ãƒˆã€æ¬„ã§ç¢ºèªã§ãã¾ã™ã€‚</p>
</div>

<div class="feature-card">
<h3>ğŸ›ï¸ ã‚°ãƒƒã‚ºæƒ…å ±</h3>
<p>ã‚°ãƒƒã‚ºæƒ…å ±ã‚’ãƒ”ãƒƒã‚¯ã‚¢ãƒƒãƒ—ã—ã¦è¡¨ç¤ºã—ã¾ã™ã€‚</p>
</div>

<div class="feature-card">
<h3>ğŸ‘¥ ãƒ¡ãƒ³ãƒãƒ¼æƒ…å ±</h3>
<p>ãƒ¡ãƒ³ãƒãƒ¼æƒ…å ±ã‚’ãƒ”ãƒƒã‚¯ã‚¢ãƒƒãƒ—ã—ã¦è¡¨ç¤ºã—ã¾ã™ã€‚</p>
<p>ä»Šå¾Œæ›´æ–°äºˆå®šã§ã™ã€‚</p>
</div>

<div class="feature-card">
<h3>ğŸ“© ãŠå•ã„åˆã‚ã›ãƒ»æ„Ÿæƒ³</h3>
<p>æƒ…å ±ä¿®æ­£ä¾é ¼ã€ä¸å…·åˆå ±å‘Šã€æ©Ÿèƒ½è¿½åŠ ãƒªã‚¯ã‚¨ã‚¹ãƒˆã€ã”æ„Ÿæƒ³ã«ã¤ã„ã¦ã¯</p>
<p>ã“ã¡ã‚‰ã«ã‚ã‚‹ãƒ•ã‚©ãƒ¼ãƒ ã¾ã§ãŠé¡˜ã„ã—ã¾ã™ã€‚</p>
</div>

<div class="feature-card">
<h3>ğŸ›  ç¾åœ¨æ¤œè¨ä¸­ã®æ©Ÿèƒ½</h3>
<p>ç¾åœ¨æ¤œè¨ä¸­ãƒ»å®Ÿè£…äºˆå®šã®æ©Ÿèƒ½ã‚’è¡¨ç¤ºã—ã¾ã™ã€‚</p>
<p>ãŠå•ã„åˆã‚ã›ãƒ•ã‚©ãƒ¼ãƒ ã‹ã‚‰ã‚¢ã‚¤ãƒ‡ã‚¢ã‚’å‹Ÿé›†ã—ã¦ã„ã¾ã™ã€‚</p>
</div>
  
<h2 style="margin-top:40px;">âš  æ³¨æ„äº‹é …</h2>

<div class="guide-box">
<p><strong>ã€ã‚µã‚¤ãƒˆã«ã¤ã„ã¦ã€‘</strong></p>
<p>
<strong>ã“ã¡ã‚‰ã®ã‚µã‚¤ãƒˆã¯éå…¬å¼ãƒ•ã‚¡ãƒ³ã‚µã‚¤ãƒˆã§ã™ã€‚</strong><br>
ã‚¤ãƒ™ãƒ³ãƒˆãƒ»ã‚°ãƒƒã‚ºæƒ…å ±ãªã©ã¯æ‰‹å‹•ã§è¿½åŠ ã—ã¦ã„ã¾ã™ã€‚
</p>
<p>
æ²è¼‰æƒ…å ±ã«ã¯å¯èƒ½ãªé™ã‚Šæ­£ç¢ºã‚’æœŸã—ã¦ã„ã¾ã™ãŒã€<br>
<strong>å†…å®¹ã®æ­£ç¢ºæ€§ãƒ»å®Œå…¨æ€§ã‚’ä¿è¨¼ã™ã‚‹ã‚‚ã®ã§ã¯ã‚ã‚Šã¾ã›ã‚“ã€‚</strong>
</p>
<p>
<strong>ã‚¤ãƒ™ãƒ³ãƒˆæ—¥ç¨‹ã‚„å†…å®¹ã¯å¤‰æ›´ãƒ»ä¸­æ­¢ã«ãªã‚‹å ´åˆãŒã‚ã‚Šã¾ã™ã€‚</strong><br>
æœ€æ–°ãƒ»è©³ç´°æƒ…å ±ã¯
<a href="https://www.dozle.jp/" target="_blank">
ãƒ‰ã‚ºãƒ«ç¤¾å…¬å¼ã‚µã‚¤ãƒˆ
</a>ã‚’ã”è¦§ãã ã•ã„ã€‚
</p>
<p>
æ²è¼‰ã—ã¦ã„ã‚‹åç§°ãƒ»ç”»åƒç­‰ã®æ¨©åˆ©ã¯å„æ¨©åˆ©è€…æ§˜ã«å¸°å±ã—ã¾ã™ã€‚<br>
å•é¡ŒãŒã‚ã‚‹å ´åˆã¯å‰Šé™¤ç­‰å¯¾å¿œã„ãŸã—ã¾ã™ã€‚<br>
ãŠå•ã„åˆã‚ã›ãƒ»æ„Ÿæƒ³ã¯ãƒ¡ãƒ‹ãƒ¥ãƒ¼ã®ãƒ¡ãƒ¼ãƒ«ã‚¢ã‚¤ã‚³ãƒ³ã‹ã‚‰ãŠé¡˜ã„ã—ã¾ã™ã€‚
</p>
  
<hr style="margin:20px 0;">
  
<p><strong>ã€AIã®ä½¿ç”¨ã«ã¤ã„ã¦ã€‘</strong></p>
<p>
æœ¬ã‚µã‚¤ãƒˆã¯<strong>ã‚³ãƒ¼ãƒ‰ä½œæˆã«ãŠã„ã¦AIã®ã‚µãƒãƒ¼ãƒˆ</strong>ã‚’å—ã‘ã¦ã„ã¾ã™ã€‚<br>
<strong>ãƒ‰ã‚ºãƒ«ç¤¾æ§˜ã®ã‚³ãƒ³ãƒ†ãƒ³ãƒ„ã‚’AIã«å­¦ç¿’ã•ã›ã‚‹è¡Œç‚ºã¯è¡Œã£ã¦ã„ã¾ã›ã‚“ã€‚</strong><br>
ã‚³ãƒ¼ãƒ‰ä½œæˆä»¥å¤–ã«AIã¯ä½¿ç”¨ã—ã¦ã„ã¾ã›ã‚“ã€‚
</p>
</div>  <!-- guide-box -->
</div>  <!-- â˜… guide ã‚»ã‚¯ã‚·ãƒ§ãƒ³ã‚’é–‰ã˜ã‚‹ -->

<div id="contact" class="section">
<h2>ğŸ“© ãŠå•ã„åˆã‚ã›ãƒ»æ„Ÿæƒ³</h2>

<div class="feature-card">
<h3>ã”æ„è¦‹ãƒ»ã”æ„Ÿæƒ³</h3>
<p>
ã‚µã‚¤ãƒˆã¸ã®ã”æ„è¦‹ã‚„ã”æ„Ÿæƒ³ã€ä¸å…·åˆã®å ±å‘Šãªã©ãŒã‚ã‚Šã¾ã—ãŸã‚‰
ä¸‹ã®ãƒ•ã‚©ãƒ¼ãƒ ã‚ˆã‚ŠãŠé€ã‚Šãã ã•ã„ã€‚
</p>
</div>

<div class="feature-card">
<h3>ğŸ›  æ©Ÿèƒ½è¿½åŠ ãƒªã‚¯ã‚¨ã‚¹ãƒˆ</h3>
<p>
ã€Œã“ã‚“ãªæ©Ÿèƒ½ãŒã‚ã£ãŸã‚‰ã„ã„ãªï¼ã€ã¨ã„ã†ã‚¢ã‚¤ãƒ‡ã‚¢ã‚‚æ­“è¿ã—ã¦ã„ã¾ã™ã€‚
</p>
</div>

<div class="feature-card">
<h3>ğŸ“¨ ãƒ•ã‚©ãƒ¼ãƒ ã¯ã“ã¡ã‚‰</h3>
<p>
ä¸‹ã®ãƒœã‚¿ãƒ³ã‹ã‚‰ãƒ•ã‚©ãƒ¼ãƒ ã‚’é–‹ã„ã¦é€ä¿¡ã—ã¦ãã ã•ã„ã€‚
</p>

<a href="https://forms.gle/4RCYFsY6cpVtjk8X6" target="_blank">
<button class="event-btn">ãƒ•ã‚©ãƒ¼ãƒ ã‚’é–‹ã</button>
</a>

</div>
</div>
  
<div id="planned" class="section">
  <h2>ğŸ›  ç¾åœ¨æ¤œè¨ä¸­ã®æ©Ÿèƒ½</h2>

  <div class="planned-filter">
    <button class="filter-btn active" onclick="filterPlanned('all')">ã™ã¹ã¦</button>
    <button class="filter-btn" onclick="filterPlanned('ã‚¢ã‚¤ãƒ‡ã‚¢')">ã‚¢ã‚¤ãƒ‡ã‚¢</button>
    <button class="filter-btn" onclick="filterPlanned('æ¤œè¨ä¸­')">æ¤œè¨ä¸­</button>
    <button class="filter-btn" onclick="filterPlanned('å®Ÿè£…äºˆå®š')">å®Ÿè£…äºˆå®š</button>
    <button class="filter-btn" onclick="filterPlanned('å®Ÿè£…æ¸ˆ')">å®Ÿè£…æ¸ˆ</button>
  </div>

  <div id="plannedFeaturesPage"></div>
</div>
  
</div>
</main>

<footer>
ã“ã¡ã‚‰ã®ã‚µã‚¤ãƒˆã¯éå…¬å¼ãƒ•ã‚¡ãƒ³ã‚µã‚¤ãƒˆã§ã™ã€‚<br>
ã‚¤ãƒ™ãƒ³ãƒˆãƒ»ã‚°ãƒƒã‚ºæƒ…å ±ãªã©ã¯æ‰‹å‹•ã§è¿½åŠ ã—ã¦ã„ã¾ã™ã€‚<br>
æœ€æ–°ãƒ»è©³ç´°æƒ…å ±ã¯ãƒ‰ã‚ºãƒ«ç¤¾å…¬å¼ã‚µã‚¤ãƒˆ(https://www.dozle.jp/)ã‚’ã”è¦§ãã ã•ã„ã€‚<br><br>
æ²è¼‰ã—ã¦ã„ã‚‹åç§°ãƒ»ç”»åƒç­‰ã®æ¨©åˆ©ã¯å„æ¨©åˆ©è€…æ§˜ã«å¸°å±ã—ã¾ã™ã€‚<br>
å•é¡ŒãŒã‚ã‚‹å ´åˆã¯å‰Šé™¤ç­‰å¯¾å¿œã„ãŸã—ã¾ã™ã€‚<br>
ãŠå•ã„åˆã‚ã›ãƒ»æ„Ÿæƒ³ã¯ãƒ¡ãƒ‹ãƒ¥ãƒ¼ã®ãƒ¡ãƒ¼ãƒ«ã‚¢ã‚¤ã‚³ãƒ³ã‹ã‚‰ãŠé¡˜ã„ã—ã¾ã™ã€‚
</footer>

<script>
function showSection(id){

  // ã‚»ã‚¯ã‚·ãƒ§ãƒ³åˆ‡ã‚Šæ›¿ãˆ
  document.querySelectorAll('.section')
    .forEach(s => s.classList.remove('active'));

  document.getElementById(id)
    .classList.add('active');

  // ã‚¿ãƒ–ã®ã‚¢ã‚¯ãƒ†ã‚£ãƒ–åˆ‡ã‚Šæ›¿ãˆ
  document.querySelectorAll('.main-nav button')
    .forEach(btn => {
      btn.classList.remove('active-tab');

      if(btn.dataset.section === id){
        btn.classList.add('active-tab');
      }
    });
  
  if(id==="mylist"){
  loadMyList();
  }
}
  
function toggleMenu(){
const menu = document.getElementById("mobileMenu");
menu.style.display = menu.style.display === "flex" ? "none" : "flex";
}
  
const eventsURL="https://docs.google.com/spreadsheets/d/e/2PACX-1vQeScX6j_3nRvOlYuVa0P4wGG6piBpQ2ZwXzZxEPscII79uBByy9Z8_MDND2wouDZboQQon7XVVN4Gp/pub?gid=0&single=true&output=csv";
const goodsURL="https://docs.google.com/spreadsheets/d/e/2PACX-1vQeScX6j_3nRvOlYuVa0P4wGG6piBpQ2ZwXzZxEPscII79uBByy9Z8_MDND2wouDZboQQon7XVVN4Gp/pub?gid=1794976478&single=true&output=csv";
const videosURL="https://docs.google.com/spreadsheets/d/e/2PACX-1vQeScX6j_3nRvOlYuVa0P4wGG6piBpQ2ZwXzZxEPscII79uBByy9Z8_MDND2wouDZboQQon7XVVN4Gp/pub?gid=594878538&single=true&output=csv";
const wordsURL="https://docs.google.com/spreadsheets/d/e/2PACX-1vQeScX6j_3nRvOlYuVa0P4wGG6piBpQ2ZwXzZxEPscII79uBByy9Z8_MDND2wouDZboQQon7XVVN4Gp/pub?gid=1791332374&single=true&output=csv";
const plannedURL="https://docs.google.com/spreadsheets/d/e/2PACX-1vQeScX6j_3nRvOlYuVa0P4wGG6piBpQ2ZwXzZxEPscII79uBByy9Z8_MDND2wouDZboQQon7XVVN4Gp/pub?gid=1152267879&single=true&output=csv";

function parseCSV(text){

  const rows = text.trim().split("\n");
  const headers = rows.shift().split(",");

  return rows.map(row=>{

    const values = row.split(","); // â† ã‚·ãƒ³ãƒ—ãƒ«ã«ã™ã‚‹

    let obj = {};

    headers.forEach((header,i)=>{
      obj[header.trim()] = values[i] ? values[i].replace(/^"|"$/g,"") : "";
    });

    return obj;

  });
}

function formatDate(dateStr){
const d=new Date(dateStr);
return `${d.getFullYear()}å¹´${d.getMonth()+1}æœˆ${d.getDate()}æ—¥`;
}

function formatEventPeriod(start, end){

  if(!end || end.trim() === ""){
    // çµ‚äº†æ—¥ãªã—
    return `${formatDate(start)}ã€œ`;
  }

  if(start === end){
    // åŒæ—¥
    return formatDate(start);
  }

  // é€šå¸¸
  return `${formatDate(start)}ã€œ${formatDate(end)}`;
}
  
function getGoodsStatus(start, end){

  if(!start || !end) return "è²©å£²çµ‚äº†";

  const now = new Date();
  const startTime = new Date(start);
  const endTime = new Date(end);

  if(now < startTime){
    return "è²©å£²å‰";
  }

  if(now >= startTime && now <= endTime){
    return "è²©å£²ä¸­";
  }

  return "è²©å£²çµ‚äº†";
}

function formatGoodsDate(dateStr){

  const date = new Date(dateStr);

  const y = date.getFullYear();
  const m = date.getMonth() + 1;
  const d = date.getDate();
  const h = String(date.getHours()).padStart(2,"0");
  const min = String(date.getMinutes()).padStart(2,"0");

  const days = ["æ—¥","æœˆ","ç«","æ°´","æœ¨","é‡‘","åœŸ"];
  const week = days[date.getDay()];

  return `${y}å¹´${m}æœˆ${d}æ—¥(${week})${h}:${min}`;
}
  
function loadTodayContent(){
const category=Math.random()<0.5?"video":"word";
if(category==="video"){
fetch(videosURL).then(r=>r.text()).then(text=>{
const data=parseCSV(text);
if(!data.length)return;
const random=data[Math.floor(Math.random()*data.length)];
const thumb = getYouTubeThumbnail(random.url);

todayBox.innerHTML =
`<h3 class="random-heading">ğŸŒŸ ãƒ©ãƒ³ãƒ€ãƒ ãƒ‰ã‚ºãƒ«ç¤¾ãƒ‡ãƒ¼ã‚¿ã€å‹•ç”»ã€‘</h3>

<div class="random-card">

  ${thumb ? `
  <div class="random-thumb-box">
    <img src="${thumb}" class="random-thumb">
  </div>
  ` : ""}

  <div class="random-content">
    <p class="random-title">${random.title}</p>
    ${random.url && random.url.trim() !== "" ?
    `<p><a href="${random.url}" target="_blank">â–¶ å‹•ç”»ã‚’è¦‹ã‚‹</a></p>`
    : ""}
  </div>

</div>`;
});
}else{
fetch(wordsURL).then(r=>r.text()).then(text=>{
const data=parseCSV(text);
if(!data.length)return;
const random=data[Math.floor(Math.random()*data.length)];
const thumb = getYouTubeThumbnail(random.url);

todayBox.innerHTML =
`<h3 class="random-heading">ğŸŒŸ ãƒ©ãƒ³ãƒ€ãƒ ãƒ‰ã‚ºãƒ«ç¤¾ãƒ‡ãƒ¼ã‚¿ã€ç”¨èªã€‘</h3>

<div class="random-card">

  ${thumb ? `
  <div class="random-thumb-box">
    <img src="${thumb}" class="random-thumb">
  </div>
  ` : ""}

  <div class="random-content">
    <p class="random-title">${random.word}</p>
    <p>${random.description}</p>
    ${random.url && random.url.trim() !== "" ?
    `<p><a href="${random.url}" target="_blank">â–¶ é–¢é€£å‹•ç”»ã‚’è¦‹ã‚‹</a></p>`
    : ""}
  </div>

</div>`;
});
}
}

let myEvents=JSON.parse(localStorage.getItem("myEvents")||"[]");

function toggleEvent(title){
if(myEvents.includes(title)){
myEvents=myEvents.filter(e=>e!==title);
}else{
myEvents.push(title);
}
localStorage.setItem("myEvents",JSON.stringify(myEvents));
location.reload();
}

const myEventsDiv=document.getElementById("myEvents");
const todayBox=document.getElementById("todayBox");

fetch(eventsURL).then(r=>r.text()).then(text=>{
const data=parseCSV(text);
data.sort((a,b)=>new Date(b.start_date)-new Date(a.start_date));

let nearest=null;
let nearestTime=Infinity;
let nearestEnd = null;
let nearestEndTime = Infinity;

const today = new Date();
const todayStr =
  today.getFullYear() + "-" +
  String(today.getMonth()+1).padStart(2,"0") + "-" +
  String(today.getDate()).padStart(2,"0");

data.forEach(event=>{

  const endStr = event.end_date;
  const end = new Date(endStr + "T00:00:00+09:00");
  const endTime = end.getTime();

  // ğŸ”´ ä»Šæ—¥çµ‚äº†ãªã‚‰æœ€å„ªå…ˆ
  if(endStr === todayStr){
    nearestEnd = event;
    nearestEndTime = 0;
    return;
  }

  // ğŸŸ  æœªæ¥ã®ã‚¤ãƒ™ãƒ³ãƒˆã®ä¸­ã§ä¸€ç•ªè¿‘ã„ã‚‚ã®
  if(endTime > Date.now() && endTime < nearestEndTime){
    nearestEndTime = endTime;
    nearestEnd = event;
  }

});
data.forEach(event=>{
const start=new Date(event.start_date);
const eventTime=start.getTime();
let dateText = "";

if(!event.end_date || event.end_date.trim() === ""){
  // çµ‚äº†æ—¥ãªã—
  dateText = `${formatDate(event.start_date)}ã€œ`;
}
else if(event.start_date === event.end_date){
  // åŒæ—¥é–‹å‚¬
  dateText = formatDate(event.start_date);
}
else{
  // é€šå¸¸ã®æœŸé–“ã‚¤ãƒ™ãƒ³ãƒˆ
  dateText = `${formatDate(event.start_date)}ã€œ${formatDate(event.end_date)}`;
}

const joined=myEvents.includes(event.title);
const btnText=joined?"å‚åŠ äºˆå®šâœ”":"å‚åŠ äºˆå®šã«ã™ã‚‹";
  
eventList.innerHTML += `
<div class="event-card-new">

  <div class="event-img-box">
    <img src="${event.image}" class="event-img-new">
  </div>

  <div class="event-info">

    <h3 class="event-title">${event.title}</h3>

    <p class="event-meta">
      <span class="material-symbols-outlined meta-icon">calendar_month</span>
      ${dateText}
    </p>

    <p class="event-meta">
      <span class="material-symbols-outlined meta-icon">location_on</span>
      ${event.location}
    </p>

    <p class="event-meta">
      <span class="material-symbols-outlined meta-icon">description</span>
      ${event.note || ""}
    </p>
    <div class="event-links">
      ${event.link1 && event.link1.trim() !== "" ? 
        `<a href="${event.link1.trim()}" target="_blank" class="event-link-btn">
          ç‰¹è¨­ã‚µã‚¤ãƒˆ
        </a>` 
      : ""}

      ${event.link2 && event.link2.trim() !== "" ? 
        `<a href="${event.link2.trim()}" target="_blank" class="event-link-btn gray">
          å…¬å¼ã‚µã‚¤ãƒˆ
        </a>` 
      : ""}
    </div>

    <div class="event-actions">

      <button class="fav-btn ${isFav(event.title) ? 'active' : ''}"
        onclick="toggleFavorite('${event.title}')">
        â™¡ ãŠæ°—ã«å…¥ã‚Š
      </button>

      <select class="event-status"
        onchange="saveStatus('${event.title}', this.value)">
        <option value="">é¸æŠã—ãªã„</option>
        <option value="äºˆå®š" ${getStatus(event.title)==="äºˆå®š"?"selected":""}>å‚åŠ äºˆå®š</option>
        <option value="æ¸ˆ" ${getStatus(event.title)==="æ¸ˆ"?"selected":""}>å‚åŠ æ¸ˆ</option>
      </select>

    </div>

  </div>
</div>
`;

if(eventTime>Date.now()&&eventTime<nearestTime){
nearestTime=eventTime;
nearest=event;
}
});

if(nearest){

  document.getElementById("latestEvent").innerHTML = `
    <div class="latest-wrapper">

      <!-- ã‚«ã‚¦ãƒ³ãƒˆãƒ€ã‚¦ãƒ³ -->
      <div id="countdown" class="latest-countdown"></div>

      <!-- ã‚¤ãƒ™ãƒ³ãƒˆã‚«ãƒ¼ãƒ‰ -->
      <div class="latest-flex">

        <img src="${nearest.image}" class="latest-thumb">

        <div class="latest-meta">

          <h3 class="latest-title">${nearest.title}</h3>

          <p class="meta-row">
            <span class="material-symbols-outlined meta-icon">calendar_month</span>
            ${formatEventPeriod(nearest.start_date, nearest.end_date)}
          </p>

          <p class="meta-row">
            <span class="material-symbols-outlined meta-icon">location_on</span>
            ${nearest.location}
          </p>

          <p class="meta-row">
            <span class="material-symbols-outlined meta-icon">description</span>
            ${nearest.note || ""}
          </p>

          <p class="latest-note">
            å…¬å¼ãƒªãƒ³ã‚¯ãƒ»ãƒã‚¤ãƒªã‚¹ãƒˆè¿½åŠ ã¯ã‚¤ãƒ™ãƒ³ãƒˆãƒšãƒ¼ã‚¸ã‚’ã”è¦§ãã ã•ã„
          </p>

        </div>
      </div>

    </div>
  `;
  startCountdown(nearest.start_date);
}

if(nearestEnd){
  document.getElementById("endingSoonEvent").innerHTML = `
    <div class="latest-wrapper">

      <div id="endingCountdown" class="latest-countdown"></div>

      <div class="latest-flex">

        <img src="${nearestEnd.image}" class="latest-thumb">

        <div class="latest-meta">

          <h3 class="latest-title">${nearestEnd.title}</h3>

          <p class="meta-row">
            <span class="material-symbols-outlined meta-icon">calendar_month</span>
            ${formatEventPeriod(nearestEnd.start_date, nearestEnd.end_date)}
          </p>

          <p class="meta-row">
            <span class="material-symbols-outlined meta-icon">location_on</span>
            ${nearestEnd.location}
          </p>

          <p class="meta-row">
            <span class="material-symbols-outlined meta-icon">description</span>
            ${nearestEnd.note || ""}
          </p>

          <p class="latest-note">
            å…¬å¼ãƒªãƒ³ã‚¯ãƒ»ãƒã‚¤ãƒªã‚¹ãƒˆè¿½åŠ ã¯ã‚¤ãƒ™ãƒ³ãƒˆãƒšãƒ¼ã‚¸ã‚’ã”è¦§ãã ã•ã„
          </p>

        </div>
      </div>

    </div>
  `;

  startEndingCountdown(nearestEnd.end_date);
}

// renderMyEvents();
});

fetch(goodsURL)
  .then(res => res.text())
  .then(text => {

    const data = parseCSV(text);

    // ğŸ”¥ ã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹ã‚’è‡ªå‹•åˆ¤å®šã—ã¦è¿½åŠ 
    data.forEach(item=>{
      item.autoStatus = getGoodsStatus(item.start_datetime, item.end_datetime);
    });

    // ğŸ”¥ ä¸¦ã³æ›¿ãˆï¼ˆè²©å£²ä¸­ â†’ è²©å£²å‰ â†’ è²©å£²çµ‚äº†ï¼‰
    const order = { "è²©å£²ä¸­":0, "è²©å£²å‰":1, "è²©å£²çµ‚äº†":2 };
    data.sort((a,b)=> order[a.autoStatus] - order[b.autoStatus]);

    let html = "";

    data.forEach(item => {

      const status = item.autoStatus;
      const isActive = status === "è²©å£²ä¸­";

      html += `
        <div class="goods-series-card">

          <div class="goods-series-image">
            <img src="${item.image}">
          </div>

          <div class="goods-series-content">

            <h3 class="goods-series-title">
              ${item.series}
            </h3>

            <p class="goods-meta">
              <span class="material-symbols-outlined">schedule</span>
              ${formatGoodsDate(item.start_datetime)}ã€œ${formatGoodsDate(item.end_datetime)}
            </p>

            <p class="goods-meta">
              <span class="material-symbols-outlined">store</span>
              ${item.site_name || ""}
            </p>

            <p class="goods-meta">
              <span class="material-symbols-outlined">description</span>
              ${item.description || ""}
            </p>

            <p class="goods-series-status status-${status}">
              ${status}
            </p>

            <div class="goods-buttons">

              ${item.link1 && item.link1.trim() !== "" ? 
                `<a href="${item.link1}" target="_blank" class="goods-btn">ã”è³¼å…¥ã¯ã“ã¡ã‚‰</a>` 
              : ""}

              ${item.link2 && item.link2.trim() !== "" ? 
                `<a href="${item.link2}" target="_blank" class="goods-btn sub">å•†å“èª¬æ˜ãƒšãƒ¼ã‚¸</a>` 
              : ""}

            </div>

          </div>

        </div>
      `;
    });

    document.getElementById("goodsList").innerHTML = html;
  });

fetch(plannedURL).then(r=>r.text()).then(text=>{
const data=parseCSV(text);

const box1 = document.getElementById("plannedFeatures");
const box2 = document.getElementById("plannedFeaturesPage");

if(!data.length){
if(box1) box1.innerHTML="<p>ç¾åœ¨æ¤œè¨ä¸­ã®æ©Ÿèƒ½ã¯ã‚ã‚Šã¾ã›ã‚“ã€‚</p>";
if(box2) box2.innerHTML="<p>ç¾åœ¨æ¤œè¨ä¸­ã®æ©Ÿèƒ½ã¯ã‚ã‚Šã¾ã›ã‚“ã€‚</p>";
return;
}

data.forEach(item=>{

const html = `
<div class="planned-card" data-status="${item.status}">
  <div class="planned-header">
    <span class="planned-title">${item.title}</span>
    <span class="planned-badge">${item.status}</span>
  </div>
  ${item.note ? `<div class="planned-note">${item.note}</div>` : ""}
</div>
`;

if(box1) box1.innerHTML += html;
if(box2) box2.innerHTML += html;

});
});

  
function startCountdown(eventDateStr){

  const eventDate = new Date(eventDateStr + "T00:00:00+09:00");

  const timer = setInterval(()=>{

    const now = new Date();
    const diff = eventDate - now;

    if(diff <= 0){
      document.getElementById("countdown").innerHTML = "ğŸ”¥ æœ¬æ—¥é–‹å‚¬ï¼";
      clearInterval(timer); // â† ã“ã“è¿½åŠ 
      return;
    }

    const days = Math.floor(diff / 86400000);
    const hours = Math.floor((diff % 86400000) / 3600000);
    const minutes = Math.floor((diff % 3600000) / 60000);
    const seconds = Math.floor((diff % 60000) / 1000);

    document.getElementById("countdown").innerHTML =
      `<span class="material-symbols-outlined countdown-icon">timer</span>
       ã‚ã¨ ${days}æ—¥ ${hours}æ™‚é–“ ${minutes}åˆ† ${seconds}ç§’ ã§é–‹å‚¬ï¼`;

  },1000);
}

function startEndingCountdown(endDate){

  function update(){

    const now = new Date();

    const todayStr =
      now.getFullYear() + "-" +
      String(now.getMonth()+1).padStart(2,"0") + "-" +
      String(now.getDate()).padStart(2,"0");

    const countdownEl = document.getElementById("endingCountdown");

    // ğŸ”´ ä»Šæ—¥ãŒçµ‚äº†æ—¥
    if(todayStr === endDate){
      countdownEl.innerHTML =
        `<span class="material-symbols-outlined countdown-icon">timer</span>
         æœ¬æ—¥çµ‚äº†ï¼`;
      return;
    }

    // ğŸŸ  ã¾ã çµ‚äº†æ—¥å‰
    const end = new Date(endDate + "T00:00:00+09:00");
    const diff = end.getTime() - now.getTime();

    if(diff > 0){

      const days = Math.floor(diff / (1000*60*60*24));
      const hours = Math.floor((diff / (1000*60*60)) % 24);
      const minutes = Math.floor((diff / (1000*60)) % 60);
      const seconds = Math.floor((diff / 1000) % 60);

      countdownEl.innerHTML =
        `<span class="material-symbols-outlined countdown-icon">timer</span>
         ã‚ã¨ ${days}æ—¥ ${hours}æ™‚é–“ ${minutes}åˆ† ${seconds}ç§’ ã§çµ‚äº†ï¼`;

      return;
    }

    // âš« ç¿Œæ—¥ã«ãªã£ãŸã‚‰æ¬¡ã®ã‚¤ãƒ™ãƒ³ãƒˆã¸
    location.reload();
  }

  update();
  setInterval(update,1000);
}
  
function getYouTubeThumbnail(url){

if(!url) return "";

// é€šå¸¸ã®watch?v=å½¢å¼
let videoId = null;

if(url.includes("watch?v=")){
videoId = url.split("watch?v=")[1].split("&")[0];
}

// youtu.beå½¢å¼
if(url.includes("youtu.be/")){
videoId = url.split("youtu.be/")[1].split("?")[0];
}

if(!videoId) return "";

return `https://img.youtube.com/vi/${videoId}/hqdefault.jpg`;
}
  
function filterPlanned(status){

const buttons = document.querySelectorAll(".filter-btn");
buttons.forEach(btn=>btn.classList.remove("active"));

event.target.classList.add("active");

const cards = document.querySelectorAll(".planned-card");

cards.forEach(card=>{
if(status==="all"){
card.style.display="block";
}else{
if(card.dataset.status===status){
card.style.display="block";
}else{
card.style.display="none";
}
}
});

}

// ===== ãŠæ°—ã«å…¥ã‚Š =====
function getFavorites(){
  return JSON.parse(localStorage.getItem("favorites") || "[]");
}

function isFav(title){
  return getFavorites().includes(title);
}

function toggleFavorite(title){
  let favs = getFavorites();

  if(favs.includes(title)){
    favs = favs.filter(t=>t!==title);
  }else{
    favs.push(title);
  }

  localStorage.setItem("favorites", JSON.stringify(favs));
  location.reload();
}


// ===== å‚åŠ ã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹ =====
function getStatus(title){
  const data = JSON.parse(localStorage.getItem("eventStatus") || "{}");
  return data[title] || "";
}

function saveStatus(title,value){
  const data = JSON.parse(localStorage.getItem("eventStatus") || "{}");
  data[title] = value;
  localStorage.setItem("eventStatus", JSON.stringify(data));
}

function loadMyList(filter="all"){

  fetch(eventsURL).then(r=>r.text()).then(text=>{
    const data=parseCSV(text);

    const favs = JSON.parse(localStorage.getItem("favorites") || "[]");
    const statusData = JSON.parse(localStorage.getItem("eventStatus") || "{}");

    let html="";
    let countParticipated=0;

    data.forEach(event=>{

      const isFavorite = favs.includes(event.title);
      const status = statusData[event.title] || "";

      if(status==="æ¸ˆ") countParticipated++;

      // ãƒ•ã‚£ãƒ«ã‚¿ãƒ¼åˆ¤å®š
      if(
        filter==="fav" && !isFavorite ||
        filter==="äºˆå®š" && status!=="äºˆå®š" ||
        filter==="æ¸ˆ" && status!=="æ¸ˆ"
      ){
        return;
      }

      if(filter!=="all" && filter!=="fav" && filter!==status){
        if(filter!=="fav") return;
      }

      html+=`
        <div class="mylist-card">
          <h3>${event.title}</h3>
          <p>ğŸ“… ${event.start_date}</p>
          <p>ğŸ“ ${event.location}</p>
          ${isFavorite ? "<p>â¤ï¸ ãŠæ°—ã«å…¥ã‚Š</p>" : ""}
          ${status ? `<p>ã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹ï¼š${status}</p>` : ""}
        </div>
      `;
    });

    document.getElementById("mylist-container").innerHTML=html || "<p>è©²å½“ã‚¤ãƒ™ãƒ³ãƒˆãªã—</p>";
    document.getElementById("mylist-count").innerText=
      `ã“ã‚Œã¾ã§å‚åŠ ã—ãŸã‚¤ãƒ™ãƒ³ãƒˆï¼š${countParticipated}ä»¶`;

  });
}

function filterMyList(type){

  document.querySelectorAll(".filter-btn")
    .forEach(btn=>btn.classList.remove("active"));

  event.target.classList.add("active");

  loadMyList(type);
}
  
loadTodayContent();
</script>

</body>
</html>




