<!DOCTYPE html>
<html lang="ja">
<head>
<link href="https://fonts.googleapis.com/css2?family=Material+Symbols+Outlined" rel="stylesheet" />
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>ã€éå…¬å¼ã€‘ãƒ‰ã‚ºãƒ«ç¤¾ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹</title>

<style>
*, *::before, *::after{
  box-sizing:border-box;
}
  
html, body{
  overflow-x:hidden;
}

body{
  margin:0;

  background:
    radial-gradient(circle at 10% 20%, rgba(181,0,18,0.06), transparent 40%),
    radial-gradient(circle at 90% 80%, rgba(181,0,18,0.05), transparent 40%),
    linear-gradient(135deg, #f4f6f9 0%, #e9edf3 100%);

  font-family: sans-serif;
}
  
.logo{
display:flex;
align-items:center;
gap:10px;
font-weight:bold;
font-size:18px;
}

.site-icon{
width:28px;
height:28px;
object-fit:contain;
}
/* ===== ãƒ˜ãƒƒãƒ€ãƒ¼å…¨ä½“ ===== */
.main-header{
position:fixed;
top:0;
width:100%;
background:#d90000;
color:white;
z-index:1000;
height:64px;   /* â† è¿½åŠ  */
}

/* ä¸Šæ®µ */
.header-top{
  height:64px;     /* â† è¿½åŠ  */
  display:flex;
  align-items:center;
  justify-content:space-between;
  padding:0 20px;  /* â† ç¸¦paddingå‰Šé™¤ */
}

.logo{
font-weight:bold;
font-size:18px;
}

.header-icons button{
background:none;
border:none;
color:white;
cursor:pointer;
margin-left:15px;
}

.header-icons .material-symbols-outlined{
font-size:24px;
}
  
header .title{
font-size:18px;
font-weight:bold;
}

main{
padding:20px;
}

.section{ display:none; }
.active{ display:block; }

.card{
background:white;
padding:20px;
margin-bottom:20px;
border-left:6px solid #ff3b3b;
box-shadow:0 2px 8px rgba(0,0,0,0.05);
}

.event-img,.goods-img{
width:140px;
margin:10px 0;
border-radius:6px;
}

.event-btn{
  margin-top:15px;
  padding:12px 22px;
  border:none;
  border-radius:10px;
  font-weight:bold;
  cursor:pointer;
  background:#b50012;
  color:white;
  transition:0.3s;
}

.event-btn:hover{
  transform:translateY(-2px);
  box-shadow:0 5px 15px rgba(0,0,0,0.2);
}

.event-btn.joined{
  background:#0a8f2a;
}

.event-button-area{
  display:flex;
  gap:12px;
  flex-wrap:wrap;
  align-items:center;
  margin-top:18px;
}

.countdown{
font-weight:bold;
color:#ff3b3b;
margin-top:10px;
}

footer{
background:#111;
color:#ccc;
padding:20px;
font-size:13px;
text-align:center;
margin-top:40px;
}

.guide-box{
background:#fff5f5;
padding:20px;
border-left:6px solid #d90000;
margin-bottom:30px;
box-shadow:0 2px 8px rgba(0,0,0,0.05);
}

.feature-card{
background:white;
padding:20px;
margin-bottom:15px;
border-left:6px solid #111;
box-shadow:0 2px 8px rgba(0,0,0,0.05);
}

.feature-card h3{
margin-top:0;
color:#d90000;
}

/* è¡¨ç¤ºåˆ‡ã‚Šæ›¿ãˆ */
.desktop-only{ display:flex; }
.mobile-only{ display:none; }

/* ãƒãƒ³ãƒãƒ¼ã‚¬ãƒ¼ */
.hamburger{
background:none;
border:none;
color:white;
cursor:pointer;
}
  
.hamburger{
  background:none;
  border:none;
  outline:none;
  box-shadow:none;
  -webkit-tap-highlight-color: transparent;
}

.hamburger:focus,
.hamburger:active,
.hamburger:focus-visible{
  outline:none;
  box-shadow:none;
}

button{
  -webkit-tap-highlight-color: transparent;
}
  
.hamburger .material-symbols-outlined{
font-size:28px;
}

/* ã‚¹ãƒãƒ›æ™‚ */
@media (max-width:768px){

.desktop-only{
display:none;
}

.mobile-only{
display:block;
}

}

.planned-card{
background:white;
padding:16px 18px;
margin-bottom:14px;
border-radius:12px;
box-shadow:0 4px 10px rgba(0,0,0,0.06);
transition:0.2s;
}

.planned-card:hover{
transform:translateY(-2px);
box-shadow:0 6px 18px rgba(0,0,0,0.1);
}

.planned-header{
display:flex;
justify-content:space-between;
align-items:center;
}

.planned-title{
font-weight:bold;
font-size:16px;
}

.planned-badge{
font-size:12px;
padding:4px 10px;
border-radius:999px;
color:white;
}

/* ã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹åˆ¥è‰² */
.planned-card[data-status="ã‚¢ã‚¤ãƒ‡ã‚¢"] .planned-badge{
background:#555;
}

.planned-card[data-status="æ¤œè¨ä¸­"] .planned-badge{
background:#777;
}

.planned-card[data-status="å®Ÿè£…äºˆå®š"] .planned-badge{
background:#b50012;
}

.planned-card[data-status="å®Ÿè£…æ¸ˆ"] .planned-badge{
background:#008800;
}

.planned-note{
margin-top:8px;
font-size:13px;
color:#555;
}

.planned-filter{
display:flex;
flex-wrap:wrap;
gap:8px;
margin-bottom:20px;
}
  
.random-content{
  flex:1;
  min-width:0; 
}

.random-heading{
  white-space:nowrap;
  font-size: clamp(16px, 4.5vw, 22px);
}
  
@media (max-width: 768px){

.random-card{
flex-direction:column;
}

.random-thumb-box{
flex:unset;
}

}

.latest-event-wrapper{
background:white;
padding:20px;
margin-bottom:20px;
border-left:6px solid #ff3b3b;
box-shadow:0 2px 8px rgba(0,0,0,0.05);
}

.event-countdown{
  color:#ff2b2b;
  font-weight:800;

  font-size: clamp(16px, 3.5vw, 22px);  /* â† å°‘ã—æ§ãˆã‚ */

  margin-bottom:16px;
  letter-spacing:0.3px;

  white-space:nowrap;   /* â† æ”¹è¡Œã•ã›ãªã„ */
}

.event-meta{
  display:flex;
  align-items:center;
  gap:6px;
  margin:4px 0;
}
 
.event-card:hover{
  transform: translateY(-4px);
  box-shadow:
    0 12px 32px rgba(0,0,0,0.18),
    0 4px 10px rgba(0,0,0,0.12);
}

.goods-series-card{
  display:flex;
  gap:40px;
  align-items:center;

  background:white;
  padding:40px;
  border-radius:18px;

  box-shadow:0 10px 30px rgba(0,0,0,0.08);
  margin-bottom:50px;
}

.goods-series-image img{
  width:420px;
  border-radius:14px;
}

.goods-series-content{
  flex:1;
}

.goods-series-title{
  font-size:26px;
  font-weight:800;
  margin-bottom:15px;
}

.goods-series-description{
  margin-bottom:15px;
}

.goods-series-status{
  font-weight:700;
  margin-bottom:20px;
}

.goods-series-status.active{
  color:#0a8f2a;
}

.goods-series-status.ended{
  color:#666;
}

.goods-buttons{
  display:flex;
  gap:15px;
  flex-wrap:wrap;
}

.goods-btn{
  display:inline-block;
  background:#0b1026;
  color:white;
  padding:14px 28px;
  border-radius:12px;
  text-decoration:none;
  font-weight:bold;
  transition:0.3s;
}

.goods-btn:hover{
  transform:translateY(-3px);
  box-shadow:0 6px 18px rgba(0,0,0,0.2);
}

.goods-btn.sub{
  background:#555;
}

@media (max-width:768px){

  .goods-series-card{
    flex-direction:column;
    padding:25px;
    gap:20px;
  }

  .goods-series-image img{
    width:100%;
  }

  .goods-series-title{
    font-size:20px;
  }

}

.event-card-new{
  display:flex;
  gap:20px;
  background:white;
  padding:20px;
  border-radius:16px;
  box-shadow:0 6px 18px rgba(0,0,0,0.08);
  margin-bottom:20px;
}

.event-img-box{
  flex:0 0 220px;
}

.event-img-new{
  width:100%;
  border-radius:14px;
}

.event-info{
  flex:1;
}

.event-links{
  margin:10px 0;
}

.event-link-btn{
  display:inline-block;
  padding:8px 14px;
  background:black;
  color:white;
  border-radius:8px;
  text-decoration:none;
  margin-right:8px;
}

.event-link-btn.gray{
  background:#555;
}

.event-actions{
  display:flex;
  align-items:center;
  gap:12px;
  margin-top:10px;
}

.event-status{
  padding:8px 12px;      /* â† ãŠæ°—ã«å…¥ã‚Šã¨åŒã˜ä½™ç™½ */
  border-radius:8px;
  border:1px solid #ccc;
  font-size:14px;
  height:38px;           /* â† é«˜ã•ã‚’å›ºå®š */
  box-sizing:border-box;
}

@media(max-width:768px){
  .event-card-new{
    flex-direction:column;
  }

  .event-img-box{
    flex:none;
  }
}

.mylist-filter{
  margin:15px 0;
}

.latest-flex{
  display:flex;
  gap:24px;
  align-items:center;
  flex-wrap:wrap;
}

.latest-thumb{
  width:260px;
  border-radius:16px;
}

.latest-meta{
  flex:1;
}

.latest-title{
  margin-top:0;
  margin-bottom:12px;
}

.latest-note{
  margin-top:14px;
  font-size:13px;
  color:#777;
}
  
.countdown-icon{
  font-size:22px;
  vertical-align:middle;
  margin-right:6px;
  color:#e60023; /* ã‚«ã‚¦ãƒ³ãƒˆãƒ€ã‚¦ãƒ³ã¨åŒã˜èµ¤ */
}

#countdown{
  font-weight:bold;
  font-size:22px;
  color:#e60023;
  display:flex;
  align-items:center;
  gap:6px;
}

.latest-wrapper{
  background:white;
  border-left:6px solid #e60023;
  padding:24px;
  border-radius:16px;
  box-shadow:0 8px 20px rgba(0,0,0,0.08);
}
  
.latest-countdown{
  font-size:22px;
  font-weight:bold;
  color:#e60023;
  display:flex;
  align-items:center;
  gap:8px;
  margin-bottom:20px;
}

#latestEvent .latest-wrapper{
  border-left:6px solid #ff8800;
}

#latestEvent .latest-countdown{
  color:#ff8800;
}

#latestEvent .countdown-icon{
  color:#ff8800;
}

.goods-meta{
  display:flex;
  align-items:center;
  gap:6px;
  margin:6px 0;
  font-size:14px;
}

.goods-series-status{
  display:inline-block;
  margin-top:10px;
  padding:6px 12px;
  border-radius:8px;
  font-weight:bold;
}

.mylist-card-new{
  border-left:5px solid #000;   /* ã‚¢ã‚¯ã‚»ãƒ³ãƒˆé»’ */
  background:#fff;             /* ç™½èƒŒæ™¯ */
  color:#000;
  padding:20px;
  margin-bottom:25px;
  border-radius:10px;
  box-shadow:0 4px 12px rgba(0,0,0,0.08);
}

.mylist-flex{
  display:flex;
  gap:20px;
  align-items:flex-start;
}

.mylist-thumb{
  width:160px;
  border-radius:8px;
}

.mylist-meta{
  flex:1;
}

.mylist-title{
  margin-bottom:10px;
  color:#000;
  font-weight:bold;
}

.meta-row{
  display:flex;
  align-items:center;
  gap:6px;
  margin-bottom:6px;
  color:#444;
}

.meta-icon{
  font-size:18px;
  color:#000;  /* ã‚¢ã‚¤ã‚³ãƒ³é»’ */
}

.latest-note{
  color:#666;
  font-size:14px;
  margin-top:6px;
}

.mylist-fav{
  margin-top:10px;
  color:#ff4d6d;
  font-weight:bold;
}

.mylist-status{
  margin-top:6px;
  font-weight:bold;
  color:#000;
}

.filter-wrapper{
  display:flex;
  gap:12px;
  margin-bottom:20px;
  flex-wrap:nowrap;
}
  
.fav-btn{
  padding:8px 12px;
  border-radius:8px;
  border:1px solid #ccc;
  background:white;
  cursor:pointer;
}

.fav-btn.active{
  background:#ff4d6d;
  color:white;
  border:none;
}

/* ===== ã‚¹ãƒãƒ›å¯¾å¿œ ===== */
@media screen and (max-width: 768px){

  .filter-wrapper{
    overflow-x:auto;       /* æ¨ªã‚¹ã‚¯ãƒ­ãƒ¼ãƒ«å¯èƒ½ */
    gap:8px;
    padding-bottom:5px;
  }

  .filter-wrapper::-webkit-scrollbar{
    height:6px;
  }

  .filter-wrapper::-webkit-scrollbar-thumb{
    background:#ccc;
    border-radius:10px;
  }

  .filter-btn{
    flex:0 0 auto;   /* å¹…å›ºå®šã—ã¦æŠ˜ã‚Šè¿”ã•ãªã„ */
    font-size:14px;
    padding:6px 14px;
  }

}

@media screen and (max-width: 768px){

  .mylist-flex{
    flex-direction:column;   /* ç¸¦ä¸¦ã³ */
    align-items:center;
  }

  .mylist-thumb{
    width:100%;
    max-width:300px;
  }

  .mylist-meta{
    width:100%;
  }

  .mylist-title{
    margin-top:15px;
    text-align:left;
  }
  
  .mylist-card-new{
    padding:15px;
  }
  
}

/* ===== ãƒ¬ã‚¤ã‚¢ã‚¦ãƒˆ ===== */
.layout{
  display:flex;
}

.sidebar{
  position:fixed;
  top:64px; /* ãƒ˜ãƒƒãƒ€ãƒ¼é«˜ã• */
  right:0;
  width:240px;
  height:calc(100vh - 64px);
  background:white;
  border-left:2px solid #d90000;
  padding:20px 0;
  z-index:900;
  transform:translateX(0);
  transition:transform 0.3s ease;
}

.sidebar-inner{
  display:flex;
  flex-direction:column;
  height:100%;
}

.sidebar-nav{
  display:flex;
  flex-direction:column;
  gap:6px;
}

.sidebar-nav button{
  display:flex;
  align-items:center;
  gap:12px;
  padding:12px 20px;
  border:none;
  background:white;
  color:black;
  cursor:pointer;
  font-size:14px;
  text-align:left;
  transition:0.2s;
}

.sidebar-nav button:hover{
  background:#f5f5f5;
}

.sidebar-nav button.active-tab{
  background:#d90000;
  color:white;
  font-weight:bold;
}

.sidebar-nav .material-symbols-outlined{
  font-size:20px;
}

/* ãƒ¡ã‚¤ãƒ³ä½™ç™½ */
#mainContent{
  margin-right:240px;
  width:100%;
  padding:0px;
  margin-top:64px;
  transition:margin 0.3s ease;
}

#mainContent.expanded{
  margin-right:0;
}

.sidebar.collapsed ~ #mainContent{
  margin-right:0;
}
  
/* ===== ã‚¹ãƒãƒ› ===== */
.sidebar-overlay{
  display:none;
}

@media(max-width:768px){

  .sidebar{
    top:64px;   /* â† ã“ã“ã‚’ä¿®æ­£ */
    height:100vh;
  }

  #mainContent{
    margin-right:0;
    margin-top:64px;
    padding:0px;
  }

  .sidebar-overlay{
    display:none;
    position:fixed;
    inset:0;
    background:rgba(0,0,0,0.4);
    z-index:800;
  }

  .sidebar-overlay.active{
    display:block;
  }

.sidebar button{
  width:100%;
  padding:14px 18px;
  border:none;
  background:white;
  color:black;
  display:flex;
  align-items:center;
  gap:10px;
  cursor:pointer;
  transition:0.2s;
}

.sidebar button:hover{
  background:#f5f5f5;
}

/* ğŸ”¥ é¸æŠä¸­ */
.sidebar button.active-tab{
  background:#d90000;
  color:white;
  font-weight:bold;
  border-right:5px solid black;
}

.sidebar button.active-tab .material-symbols-outlined{
  color:white;
}

}

.main-footer{
  margin-top:60px;
  padding:24px 16px;
  background:black;
  color:#aaa;
  text-align:center;
  font-size:14px;
}

.main-inner{
  padding:30px;
}

@media(max-width:768px){
  .main-inner{
    padding:24px 12px 12px 12px;
  }
}

.sidebar.collapsed{
  transform:translateX(100%);
}
  
/* PCï¼šé–‹ã„ã¦ã„ã‚‹çŠ¶æ…‹ */
.sidebar.closed{
  transform:translateX(100%);
}

/* ã‚¹ãƒãƒ›ï¼šæœ€åˆã¯é–‰ã˜ã‚‹ */
@media(max-width:768px){
  .sidebar{
    transform:translateX(100%);
  }

  .sidebar.open{
    transform:translateX(0);
  }
}

.sidebar button{
  background:none;
  border:none;
  box-shadow:none;
  outline:none;
}

.sidebar button:focus,
.sidebar button:focus-visible,
.sidebar button:active{
  outline:none;
  box-shadow:none;
}

.site-title img{
  height:55px;
  cursor:pointer;
}

@media(max-width:768px){
  .site-title img{
    height:50px;
  }
}

.site-title{
  display:flex;
  align-items:center;
}

.section-title-img{
  width:100%;
  margin:16px 0;
  text-align:left;   /* å·¦å¯„ã› */
}

.section-title-img img{
  width:100%;
  max-width:360px;   /* â† ã‚µã‚¤ã‚ºèª¿æ•´ï¼ˆã“ã“ã‚’å¤‰ãˆã‚Œã°å¤§ãã•å¤‰ã‚ã‚‹ï¼‰ */
  height:auto;
  display:block;
  margin:0;          /* autoã‚’æ¶ˆã™ */
}

/* ===== ãƒ‹ãƒ¥ãƒ¼ã‚¹å…¨ä½“ ===== */
.news-section-title{
  display:flex;
  align-items:center;
  gap:8px;
  font-size:18px;
  font-weight:700;
  margin-bottom:16px;
}

/* ===== ã‚«ãƒ¼ãƒ‰ ===== */
.news-card{
  background:#fff;
  border-left:4px solid #d60000;
  padding:16px;
  margin-bottom:16px;
  border-radius:8px;
  box-shadow:0 2px 6px rgba(0,0,0,0.08);
}

/* ä¸Šéƒ¨ãƒ˜ãƒƒãƒ€ãƒ¼ */
.news-header{
  display:flex;
  align-items:center;
  gap:10px;
  font-size:14px;
  margin-bottom:8px;
}

.news-icon{
  font-size:18px;
  color:#d60000;
}

.news-date{
  color:#666;
}

/* NEWãƒãƒƒã‚¸ */
.news-badge{
  background:#d60000;
  color:#fff;
  font-size:11px;
  padding:2px 6px;
  border-radius:4px;
  font-weight:bold;
}

/* ã‚¿ã‚¤ãƒˆãƒ« */
.news-title{
  font-size:16px;
  margin:6px 0;
  font-weight:600;
}

/* æœ¬æ–‡ */
.news-content{
  font-size:14px;
  color:#444;
  margin-bottom:8px;
  line-height:1.6;
}

/* ãƒªãƒ³ã‚¯ */
.news-link{
  display:inline-flex;
  align-items:center;
  gap:4px;
  font-size:14px;
  color:#000;
  text-decoration:none;
  font-weight:500;
}

.news-link:hover{
  text-decoration:underline;
}

.link-icon{
  font-size:18px;
}

/* ===== ãƒ©ãƒ³ãƒ€ãƒ  ã‚»ã‚¯ã‚·ãƒ§ãƒ³ã‚¿ã‚¤ãƒˆãƒ« ===== */
.random-section-title{
  display:flex;
  align-items:center;
  gap:8px;
  font-size:18px;
  font-weight:700;
  margin:24px 0 16px 0;
}

/* ===== ãƒ©ãƒ³ãƒ€ãƒ ã‚«ãƒ¼ãƒ‰æ¨ªä¸¦ã³ ===== */
.random-card{
  display:flex;
  gap:16px;
  align-items:flex-start;
  background:#fff;
  border-left:4px solid #000;
  padding:16px;
  margin-bottom:24px;
  border-radius:8px;
  box-shadow:0 2px 6px rgba(0,0,0,0.08);
}

/* ç”»åƒãƒœãƒƒã‚¯ã‚¹ */
.random-thumb-box{
  flex-shrink:0;
  width:260px;              /* â† PCã‚µã‚¤ã‚º */
  aspect-ratio:16/9;
  overflow:hidden;
  border-radius:6px;
}

/* ç”»åƒ */
.random-thumb{
  width:100%;
  height:100%;
  object-fit:cover;
  display:block;
}

/* ãƒ†ã‚­ã‚¹ãƒˆ */
.random-content{
  flex:1;
}

/* ===== ç”»åƒãŒãªã„ã¨ãã¯ç¸¦è¡¨ç¤º ===== */
.random-card.no-image{
  display:block;
}

/* ===== ã‚¹ãƒãƒ› ===== */
@media(max-width:768px){

  .random-card{
    flex-direction:column;
  }

  .random-thumb-box{
    width:100%;
  }

}

/* ã‚¿ã‚¤ãƒˆãƒ« */
.random-title{
  font-size:16px;
  font-weight:600;
  margin-bottom:8px;
}

/* èª¬æ˜ */
.random-description{
  font-size:14px;
  color:#444;
  margin-bottom:8px;
  line-height:1.6;
}

/* ãƒªãƒ³ã‚¯ */
.random-link{
  display:inline-flex;
  align-items:center;
  gap:4px;
  font-size:14px;
  color:#000;
  text-decoration:none;
  font-weight:500;
}

.random-link:hover{
  text-decoration:underline;
}

.mylist-type-tabs{
  display:flex;
  gap:8px;
  margin-bottom:16px;
}

.mylist-type-tabs button{
  flex:1;
  padding:10px;
  border:2px solid #000;
  background:#fff;
  font-weight:600;
  cursor:pointer;
  border-radius:6px;
}

.mylist-type-tabs button.active-type{
  background:#000;
  color:#fff;
}

.filter-row{
  display:flex;
  gap:6px;
  margin-bottom:20px;
  flex-wrap:wrap;
}
  
.sale-now { color:#00a000; font-weight:bold; }
.sale-before { color:#0066cc; }
.sale-end { color:#666; }
  
.mylist-card{
  border-left:5px solid #000;   /* ã‚¢ã‚¯ã‚»ãƒ³ãƒˆé»’ */
  background:#fff;             /* ç™½èƒŒæ™¯ */
  color:#000;
  padding:20px;
  margin-bottom:25px;
  border-radius:10px;
  box-shadow:0 4px 12px rgba(0,0,0,0.08);
  display:flex;
  gap:20px;
}

.mylist-img{
  width:160px;
  border-radius:8px;
}

.mylist-info{
  flex:1;
}

@media(max-width:768px){
  .mylist-card{
    flex-direction:column;
    padding:15px
  }

  .mylist-img{
    width:100%;
    max-width:300px;
  }
}

/* ãƒã‚¤ã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹ã‚¨ãƒªã‚¢ */
.my-status-box{
  margin-top:14px;
  padding:12px;
  background:#f4f4f4;
  border-radius:8px;
  display:flex;
  gap:10px;
  flex-wrap:wrap;
}

/* ãƒãƒƒã‚¸å…±é€š */
.my-badge{
  padding:6px 12px;
  border-radius:20px;
  font-size:13px;
  font-weight:600;
}

/* ãŠæ°—ã«å…¥ã‚Š */
.fav-badge{
  background:#ff4d6d;
  color:#fff;
}

/* ã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹ */
.status-badge{
  background:#222;
  color:#fff;
}

/* ===== ãƒ•ã‚£ãƒ«ã‚¿ãƒ¼ æœ€çµ‚ç‰ˆ ===== */

.filter-btn{
  padding:8px 18px;
  border:1px solid #000;
  border-radius:20px;
  background:#fff;
  color:#000;
  cursor:pointer;
  white-space:nowrap;
  transition:all 0.2s ease;
}

.filter-row .filter-btn{
  padding:6px 12px;
  font-size:13px;
}

/* ãƒ›ãƒãƒ¼ï¼ˆå¼·ã‚æŒ‡å®šï¼‰ */
.filter-row .filter-btn:hover{
  background:#000;
  color:#fff;
}

/* ã‚¢ã‚¯ãƒ†ã‚£ãƒ– */
.filter-row .filter-btn.active{
  background:#000;
  color:#fff;
  font-weight:bold;
}
  
</style>
</head>

<body>

<header class="main-header">

  <!-- ä¸Šæ®µ -->
  <div class="header-top">
    <div class="site-title" onclick="showSection('home')">
      <img src="title-logo.png" alt="ã‚µã‚¤ãƒˆã‚¿ã‚¤ãƒˆãƒ«">
    </div>

    <!-- ã‚¹ãƒãƒ›ãƒ»ãƒ‘ã‚½ã‚³ãƒ³ä¸¡æ–¹ãƒãƒ³ãƒãƒ¼ã‚¬ãƒ¼ -->
    <button class="hamburger" onclick="toggleSidebar()">
      <span id="menuIcon" class="material-symbols-outlined">menu</span>
    </button>
  </div>

</header>

<div class="layout">

  <!-- ===== ã‚µã‚¤ãƒ‰ãƒãƒ¼ ===== -->
  <aside id="sidebar" class="sidebar">

    <div class="sidebar-inner">

      <button class="sidebar-toggle desktop-only" onclick="toggleSidebar()">
        <span class="material-symbols-outlined">horizontal_align_right</span>
      </button>

      <nav class="sidebar-nav">

        <button onclick="showSection('home');closeSidebarMobile()" data-section="home">
          <span class="material-symbols-outlined">home</span>
          <span>ãƒ›ãƒ¼ãƒ </span>
        </button>

        <button onclick="showSection('event');closeSidebarMobile()" data-section="event">
          <span class="material-symbols-outlined">event</span>
          <span>ã‚¤ãƒ™ãƒ³ãƒˆ</span>
        </button>

        <button onclick="showSection('goods');closeSidebarMobile()" data-section="goods">
          <span class="material-symbols-outlined">shopping_bag</span>
          <span>ã‚°ãƒƒã‚º</span>
        </button>

        <button onclick="showSection('mylist');closeSidebarMobile()" data-section="mylist">
          <span class="material-symbols-outlined">bookmark</span>
          <span>ãƒã‚¤ãƒªã‚¹ãƒˆ</span>
        </button>

        <button onclick="showSection('about');closeSidebarMobile()" data-section="about">
          <span class="material-symbols-outlined">menu_book</span>
          <span>ãƒ‰ã‚ºãƒ«ç¤¾</span>
        </button>

        <hr>

        <button onclick="showSection('guide');closeSidebarMobile()" data-section="guide">
          <span class="material-symbols-outlined">help</span>
          <span>ä½¿ã„æ–¹</span>
        </button>

        <button onclick="showSection('contact');closeSidebarMobile()" data-section="contact">
          <span class="material-symbols-outlined">mail</span>
          <span>ãŠå•ã„åˆã‚ã›</span>
        </button>

        <button onclick="showSection('planned');closeSidebarMobile()" data-section="planned">
          <span class="material-symbols-outlined">build</span>
          <span>ç¾åœ¨æ¤œè¨ä¸­ã®æ©Ÿèƒ½</span>
        </button>

      </nav>
    </div>
  </aside>

<!-- ã‚ªãƒ¼ãƒãƒ¼ãƒ¬ã‚¤ï¼ˆã‚¹ãƒãƒ›ç”¨ï¼‰ -->
<div id="sidebarOverlay" class="sidebar-overlay" onclick="closeSidebar()"></div>

<!-- ===== ãƒ¡ã‚¤ãƒ³ã‚¨ãƒªã‚¢ ===== -->
<main id="mainContent">
<div class="main-inner">

<div id="home" class="section active">

<div id="newsBox"></div>
<div id="todayBox"></div>

<h2>æœ€æ–°ã‚¤ãƒ™ãƒ³ãƒˆ</h2>
<div id="latestEvent"></div>

<h2>çµ‚äº†é–“è¿‘ã‚¤ãƒ™ãƒ³ãƒˆ</h2>
<div id="endingSoonEvent"></div>

</div>

<div id="event" class="section">
<h2>ã‚¤ãƒ™ãƒ³ãƒˆæƒ…å ±</h2>
<div id="eventList"></div>
</div>

<div id="goods" class="section">
<h2>ã‚°ãƒƒã‚ºæƒ…å ±</h2>
<div id="goodsList"></div>
</div>

<div id="mylist" class="section">

  <h2>ãƒã‚¤ãƒªã‚¹ãƒˆ</h2>

  <div class="mylist-type-tabs">
    <button onclick="switchMyListType('event')" id="tab-event" class="active-type">
      ã‚¤ãƒ™ãƒ³ãƒˆ
    </button>
    <button onclick="switchMyListType('goods')" id="tab-goods">
      ã‚°ãƒƒã‚º
    </button>
  </div>

  <div class="filter-row">
    <button class="filter-btn active"
      onclick="filterMyList('all', this)">
      ã™ã¹ã¦
    </button>

    <button class="filter-btn"
      onclick="filterMyList('fav', this)">
      ãŠæ°—ã«å…¥ã‚Š
    </button>

    <button class="filter-btn"
      onclick="filterMyList('äºˆå®š', this)">
      <span id="filter-plan-label">å‚åŠ äºˆå®š</span>
    </button>

    <button class="filter-btn"
      onclick="filterMyList('æ¸ˆ', this)">
      <span id="filter-done-label">å‚åŠ æ¸ˆ</span>
    </button>
  </div>

  <p id="mylist-count"></p>

  <div id="mylist-container"></div>

</div>

<div id="about" class="section">
<h2>ãƒ¡ãƒ³ãƒãƒ¼æƒ…å ±</h2>
<div class="card"><h3>ãƒ‰ã‚ºãƒ«</h3><p>ãƒ­ã‚¸ã‚«ãƒ«ã‚´ãƒªãƒ©ç¤¾é•·</p></div>
<div class="card"><h3>ã¼ã‚“ã˜ã‚…ã†ã‚‹</h3><p>ï¼ˆå¿ƒã‚„ã•ã—ã„ï¼‰å‘æ€¯è€…</p></div>
<div class="card"><h3>ãŠã‚“ã‚Šãƒ¼</h3><p>ã‚¹ãƒ”ãƒ¼ãƒ‰ã‚¹ã‚¿ãƒ¼</p></div>
<div class="card"><h3>ãŠã‚‰ãµãã‚“</h3><p>ã‚ãªãŸã®å¿ƒã‚’ç‹™ã„æ’ƒã¡</p></div>
<div class="card"><h3>ãŠãŠã¯ã‚‰MEN</h3><p>ã‚ºãƒœãƒ©ãªåŒ </p></div>
</div>

<div id="guide" class="section">
<h2>ã“ã®ã‚µã‚¤ãƒˆã«ã¤ã„ã¦</h2>

<div class="guide-box">
<p>
ã“ã®ã‚µã‚¤ãƒˆã¯ã€éå…¬å¼ãƒ•ã‚¡ãƒ³ã‚µã‚¤ãƒˆã§ã™ã€‚
</p>
<p>
ã‚¤ãƒ™ãƒ³ãƒˆã‚„ã‚°ãƒƒã‚ºæƒ…å ±ã‚’ãƒ”ãƒƒã‚¯ã‚¢ãƒƒãƒ—ã—ã€å‹•ç”»ã‚„ç”¨èªã‚’ãƒ©ãƒ³ãƒ€ãƒ è¡¨ç¤ºã™ã‚‹ã“ã¨ã§ã€
ãƒ‰ã‚ºãƒ«ç¤¾ã‚’ã‚‚ã£ã¨æ¥½ã—ã‚ã‚‹ã“ã¨ã‚’ç›®çš„ã¨ã—ã¦ã„ã¾ã™ã€‚
</p>
</div>

<h2 style="margin-top:40px;">ä¸»ãªæ©Ÿèƒ½</h2>

<div class="feature-card">
<h3>ğŸ” ãƒ©ãƒ³ãƒ€ãƒ ãƒ‰ã‚ºãƒ«ç¤¾ãƒ‡ãƒ¼ã‚¿ï¼ˆãƒ›ãƒ¼ãƒ ã‚¿ãƒ–ï¼‰</h3>
<p>ãŠã™ã™ã‚ã®å‹•ç”»ã¾ãŸã¯ç”¨èªã‚’ãƒ©ãƒ³ãƒ€ãƒ ã§1ä»¶è¡¨ç¤ºã—ã¾ã™ã€‚</p>
<p>ãƒšãƒ¼ã‚¸ã‚’è¨ªã‚Œã‚‹ãŸã³ã«å¤‰ã‚ã‚Šã¾ã™ã€‚</p>
</div>

<div class="feature-card">
<h3>â³ ã‚«ã‚¦ãƒ³ãƒˆãƒ€ã‚¦ãƒ³æ©Ÿèƒ½ï¼ˆãƒ›ãƒ¼ãƒ ã‚¿ãƒ–ï¼‰</h3>
<p>ç›´è¿‘ã‚¤ãƒ™ãƒ³ãƒˆã¾ã§ã®æ®‹ã‚Šæ™‚é–“ã‚’è‡ªå‹•è¡¨ç¤ºã—ã¾ã™ã€‚</p>
</div>

<div class="feature-card">
<h3>ğŸ“… ã‚¤ãƒ™ãƒ³ãƒˆæƒ…å ±</h3>
<p>ã‚¤ãƒ™ãƒ³ãƒˆæƒ…å ±ã‚’ãƒ”ãƒƒã‚¯ã‚¢ãƒƒãƒ—ã—ã¦è¡¨ç¤ºã—ã¾ã™ã€‚</p>
<p>ã‚¤ãƒ™ãƒ³ãƒˆæƒ…å ±ã®ä¸‹ã«ã‚ã‚‹ã€Œå‚åŠ äºˆå®šã«ã™ã‚‹ã€ãƒœã‚¿ãƒ³ã‚’æŠ¼ã™ã¨ã€è‡ªåˆ†ã ã‘ã®å‚åŠ äºˆå®šä¸€è¦§ã«ä¿å­˜ã•ã‚Œã€</p>
<p>ãƒ›ãƒ¼ãƒ ã‚¿ãƒ–ã®ã€Œã‚ãªãŸã®å‚åŠ äºˆå®šã‚¤ãƒ™ãƒ³ãƒˆã€æ¬„ã§ç¢ºèªã§ãã¾ã™ã€‚</p>
</div>

<div class="feature-card">
<h3>ğŸ›ï¸ ã‚°ãƒƒã‚ºæƒ…å ±</h3>
<p>ã‚°ãƒƒã‚ºæƒ…å ±ã‚’ãƒ”ãƒƒã‚¯ã‚¢ãƒƒãƒ—ã—ã¦è¡¨ç¤ºã—ã¾ã™ã€‚</p>
</div>

<div class="feature-card">
<h3>ğŸ‘¥ ãƒ¡ãƒ³ãƒãƒ¼æƒ…å ±</h3>
<p>ãƒ¡ãƒ³ãƒãƒ¼æƒ…å ±ã‚’ãƒ”ãƒƒã‚¯ã‚¢ãƒƒãƒ—ã—ã¦è¡¨ç¤ºã—ã¾ã™ã€‚</p>
<p>ä»Šå¾Œæ›´æ–°äºˆå®šã§ã™ã€‚</p>
</div>

<div class="feature-card">
<h3>ğŸ“© ãŠå•ã„åˆã‚ã›ãƒ»æ„Ÿæƒ³</h3>
<p>æƒ…å ±ä¿®æ­£ä¾é ¼ã€ä¸å…·åˆå ±å‘Šã€æ©Ÿèƒ½è¿½åŠ ãƒªã‚¯ã‚¨ã‚¹ãƒˆã€ã”æ„Ÿæƒ³ã«ã¤ã„ã¦ã¯</p>
<p>ã“ã¡ã‚‰ã«ã‚ã‚‹ãƒ•ã‚©ãƒ¼ãƒ ã¾ã§ãŠé¡˜ã„ã—ã¾ã™ã€‚</p>
</div>

<div class="feature-card">
<h3>ğŸ›  ç¾åœ¨æ¤œè¨ä¸­ã®æ©Ÿèƒ½</h3>
<p>ç¾åœ¨æ¤œè¨ä¸­ãƒ»å®Ÿè£…äºˆå®šã®æ©Ÿèƒ½ã‚’è¡¨ç¤ºã—ã¾ã™ã€‚</p>
<p>ãŠå•ã„åˆã‚ã›ãƒ•ã‚©ãƒ¼ãƒ ã‹ã‚‰ã‚¢ã‚¤ãƒ‡ã‚¢ã‚’å‹Ÿé›†ã—ã¦ã„ã¾ã™ã€‚</p>
</div>
  
<h2 style="margin-top:40px;">âš  æ³¨æ„äº‹é …</h2>

<div class="guide-box">
<p><strong>ã€ã‚µã‚¤ãƒˆã«ã¤ã„ã¦ã€‘</strong></p>
<p>
<strong>ã“ã¡ã‚‰ã®ã‚µã‚¤ãƒˆã¯éå…¬å¼ãƒ•ã‚¡ãƒ³ã‚µã‚¤ãƒˆã§ã™ã€‚</strong><br>
ã‚¤ãƒ™ãƒ³ãƒˆãƒ»ã‚°ãƒƒã‚ºæƒ…å ±ãªã©ã¯æ‰‹å‹•ã§è¿½åŠ ã—ã¦ã„ã¾ã™ã€‚
</p>
<p>
æ²è¼‰æƒ…å ±ã«ã¯å¯èƒ½ãªé™ã‚Šæ­£ç¢ºã‚’æœŸã—ã¦ã„ã¾ã™ãŒã€<br>
<strong>å†…å®¹ã®æ­£ç¢ºæ€§ãƒ»å®Œå…¨æ€§ã‚’ä¿è¨¼ã™ã‚‹ã‚‚ã®ã§ã¯ã‚ã‚Šã¾ã›ã‚“ã€‚</strong>
</p>
<p>
<strong>ã‚¤ãƒ™ãƒ³ãƒˆæ—¥ç¨‹ã‚„å†…å®¹ã¯å¤‰æ›´ãƒ»ä¸­æ­¢ã«ãªã‚‹å ´åˆãŒã‚ã‚Šã¾ã™ã€‚</strong><br>
æœ€æ–°ãƒ»è©³ç´°æƒ…å ±ã¯
<a href="https://www.dozle.jp/" target="_blank">
ãƒ‰ã‚ºãƒ«ç¤¾å…¬å¼ã‚µã‚¤ãƒˆ
</a>ã‚’ã”è¦§ãã ã•ã„ã€‚
</p>
<p>
æ²è¼‰ã—ã¦ã„ã‚‹åç§°ãƒ»ç”»åƒç­‰ã®æ¨©åˆ©ã¯å„æ¨©åˆ©è€…æ§˜ã«å¸°å±ã—ã¾ã™ã€‚<br>
å•é¡ŒãŒã‚ã‚‹å ´åˆã¯å‰Šé™¤ç­‰å¯¾å¿œã„ãŸã—ã¾ã™ã€‚<br>
ãŠå•ã„åˆã‚ã›ãƒ»æ„Ÿæƒ³ã¯ãƒ¡ãƒ‹ãƒ¥ãƒ¼ã®ãƒ¡ãƒ¼ãƒ«ã‚¢ã‚¤ã‚³ãƒ³ã‹ã‚‰ãŠé¡˜ã„ã—ã¾ã™ã€‚
</p>
  
<hr style="margin:20px 0;">
  
<p><strong>ã€AIã®ä½¿ç”¨ã«ã¤ã„ã¦ã€‘</strong></p>
<p>
æœ¬ã‚µã‚¤ãƒˆã¯<strong>ã‚³ãƒ¼ãƒ‰ä½œæˆã«ãŠã„ã¦AIã®ã‚µãƒãƒ¼ãƒˆ</strong>ã‚’å—ã‘ã¦ã„ã¾ã™ã€‚<br>
<strong>ãƒ‰ã‚ºãƒ«ç¤¾æ§˜ã®ã‚³ãƒ³ãƒ†ãƒ³ãƒ„ã‚’AIã«å­¦ç¿’ã•ã›ã‚‹è¡Œç‚ºã¯è¡Œã£ã¦ã„ã¾ã›ã‚“ã€‚</strong><br>
ã‚³ãƒ¼ãƒ‰ä½œæˆä»¥å¤–ã«AIã¯ä½¿ç”¨ã—ã¦ã„ã¾ã›ã‚“ã€‚
</p>
</div>  <!-- guide-box -->
</div>  <!-- â˜… guide ã‚»ã‚¯ã‚·ãƒ§ãƒ³ã‚’é–‰ã˜ã‚‹ -->

<div id="contact" class="section">
<h2>ğŸ“© ãŠå•ã„åˆã‚ã›ãƒ»æ„Ÿæƒ³</h2>

<div class="feature-card">
<h3>ã”æ„è¦‹ãƒ»ã”æ„Ÿæƒ³</h3>
<p>
ã‚µã‚¤ãƒˆã¸ã®ã”æ„è¦‹ã‚„ã”æ„Ÿæƒ³ã€ä¸å…·åˆã®å ±å‘Šãªã©ãŒã‚ã‚Šã¾ã—ãŸã‚‰
ä¸‹ã®ãƒ•ã‚©ãƒ¼ãƒ ã‚ˆã‚ŠãŠé€ã‚Šãã ã•ã„ã€‚
</p>
</div>

<div class="feature-card">
<h3>ğŸ›  æ©Ÿèƒ½è¿½åŠ ãƒªã‚¯ã‚¨ã‚¹ãƒˆ</h3>
<p>
ã€Œã“ã‚“ãªæ©Ÿèƒ½ãŒã‚ã£ãŸã‚‰ã„ã„ãªï¼ã€ã¨ã„ã†ã‚¢ã‚¤ãƒ‡ã‚¢ã‚‚æ­“è¿ã—ã¦ã„ã¾ã™ã€‚
</p>
</div>

<div class="feature-card">
<h3>ğŸ“¨ ãƒ•ã‚©ãƒ¼ãƒ ã¯ã“ã¡ã‚‰</h3>
<p>
ä¸‹ã®ãƒœã‚¿ãƒ³ã‹ã‚‰ãƒ•ã‚©ãƒ¼ãƒ ã‚’é–‹ã„ã¦é€ä¿¡ã—ã¦ãã ã•ã„ã€‚
</p>

<a href="https://forms.gle/4RCYFsY6cpVtjk8X6" target="_blank">
<button class="event-btn">ãƒ•ã‚©ãƒ¼ãƒ ã‚’é–‹ã</button>
</a>

</div>
</div>
  
<div id="planned" class="section">
  <h2>ğŸ›  ç¾åœ¨æ¤œè¨ä¸­ã®æ©Ÿèƒ½</h2>

  <div class="planned-filter">
    <button class="filter-btn active" onclick="filterPlanned('all')">ã™ã¹ã¦</button>
    <button class="filter-btn" onclick="filterPlanned('ã‚¢ã‚¤ãƒ‡ã‚¢')">ã‚¢ã‚¤ãƒ‡ã‚¢</button>
    <button class="filter-btn" onclick="filterPlanned('æ¤œè¨ä¸­')">æ¤œè¨ä¸­</button>
    <button class="filter-btn" onclick="filterPlanned('å®Ÿè£…äºˆå®š')">å®Ÿè£…äºˆå®š</button>
    <button class="filter-btn" onclick="filterPlanned('å®Ÿè£…æ¸ˆ')">å®Ÿè£…æ¸ˆ</button>
  </div>

  <div id="plannedFeaturesPage"></div>
</div>

</div>
  
<footer class="main-footer">
ã“ã¡ã‚‰ã®ã‚µã‚¤ãƒˆã¯éå…¬å¼ãƒ•ã‚¡ãƒ³ã‚µã‚¤ãƒˆã§ã™ã€‚<br>
ã‚¤ãƒ™ãƒ³ãƒˆãƒ»ã‚°ãƒƒã‚ºæƒ…å ±ãªã©ã¯æ‰‹å‹•ã§è¿½åŠ ã—ã¦ã„ã¾ã™ã€‚<br>
æœ€æ–°ãƒ»è©³ç´°æƒ…å ±ã¯ãƒ‰ã‚ºãƒ«ç¤¾å…¬å¼ã‚µã‚¤ãƒˆ(https://www.dozle.jp/)ã‚’ã”è¦§ãã ã•ã„ã€‚<br><br>
æ²è¼‰ã—ã¦ã„ã‚‹åç§°ãƒ»ç”»åƒç­‰ã®æ¨©åˆ©ã¯å„æ¨©åˆ©è€…æ§˜ã«å¸°å±ã—ã¾ã™ã€‚<br>
å•é¡ŒãŒã‚ã‚‹å ´åˆã¯å‰Šé™¤ç­‰å¯¾å¿œã„ãŸã—ã¾ã™ã€‚<br>
ãŠå•ã„åˆã‚ã›ãƒ»æ„Ÿæƒ³ã¯ãƒ¡ãƒ‹ãƒ¥ãƒ¼ã®ãƒ¡ãƒ¼ãƒ«ã‚¢ã‚¤ã‚³ãƒ³ã‹ã‚‰ãŠé¡˜ã„ã—ã¾ã™ã€‚
</footer>

<script>
window.addEventListener("DOMContentLoaded", function(){
  showSection("home");
});
  
function showSection(sectionId){

  document.querySelectorAll('.section').forEach(section=>{
    section.classList.remove('active');
  });

  document.getElementById(sectionId).classList.add('active');

  document.querySelectorAll('.sidebar button').forEach(btn=>{
    btn.classList.remove('active-tab');
  });

  const activeBtn = document.querySelector(
    `.sidebar button[data-section="${sectionId}"]`
  );

  if(activeBtn){
    activeBtn.classList.add('active-tab');
  }

  // ğŸ”¥ ã‚¹ãƒãƒ›ãªã‚‰é–‰ã˜ã‚‹
  if(window.innerWidth <= 768){
    closeSidebar();
  }

  if(sectionId==="mylist"){
    loadMyList();
  }
}
  
const eventsURL="https://docs.google.com/spreadsheets/d/e/2PACX-1vQeScX6j_3nRvOlYuVa0P4wGG6piBpQ2ZwXzZxEPscII79uBByy9Z8_MDND2wouDZboQQon7XVVN4Gp/pub?gid=0&single=true&output=csv";
const goodsURL="https://docs.google.com/spreadsheets/d/e/2PACX-1vQeScX6j_3nRvOlYuVa0P4wGG6piBpQ2ZwXzZxEPscII79uBByy9Z8_MDND2wouDZboQQon7XVVN4Gp/pub?gid=1794976478&single=true&output=csv";
const videosURL="https://docs.google.com/spreadsheets/d/e/2PACX-1vQeScX6j_3nRvOlYuVa0P4wGG6piBpQ2ZwXzZxEPscII79uBByy9Z8_MDND2wouDZboQQon7XVVN4Gp/pub?gid=594878538&single=true&output=csv";
const wordsURL="https://docs.google.com/spreadsheets/d/e/2PACX-1vQeScX6j_3nRvOlYuVa0P4wGG6piBpQ2ZwXzZxEPscII79uBByy9Z8_MDND2wouDZboQQon7XVVN4Gp/pub?gid=1791332374&single=true&output=csv";
const plannedURL="https://docs.google.com/spreadsheets/d/e/2PACX-1vQeScX6j_3nRvOlYuVa0P4wGG6piBpQ2ZwXzZxEPscII79uBByy9Z8_MDND2wouDZboQQon7XVVN4Gp/pub?gid=1152267879&single=true&output=csv";
const newsURL="https://docs.google.com/spreadsheets/d/e/2PACX-1vQeScX6j_3nRvOlYuVa0P4wGG6piBpQ2ZwXzZxEPscII79uBByy9Z8_MDND2wouDZboQQon7XVVN4Gp/pub?gid=99757782&single=true&output=csv";
  
function parseCSV(text){

  const rows = text.trim().split("\n");
  const headers = rows.shift().split(",");

  return rows.map(row=>{

    const values = row.split(","); // â† ã‚·ãƒ³ãƒ—ãƒ«ã«ã™ã‚‹

    let obj = {};

    headers.forEach((header,i)=>{
      obj[header.trim()] = values[i] ? values[i].replace(/^"|"$/g,"") : "";
    });

    return obj;

  });
}

function formatDate(dateStr){
const d=new Date(dateStr);
return `${d.getFullYear()}å¹´${d.getMonth()+1}æœˆ${d.getDate()}æ—¥`;
}

function formatEventPeriod(start, end){

  if(!end || end.trim() === ""){
    // çµ‚äº†æ—¥ãªã—
    return `${formatDate(start)}ã€œ`;
  }

  if(start === end){
    // åŒæ—¥
    return formatDate(start);
  }

  // é€šå¸¸
  return `${formatDate(start)}ã€œ${formatDate(end)}`;
}
  
function getGoodsStatus(start, end){

  if(!start || !end) return "è²©å£²çµ‚äº†";

  const now = new Date();
  const startTime = new Date(start);
  const endTime = new Date(end);

  if(now < startTime){
    return "è²©å£²å‰";
  }

  if(now >= startTime && now <= endTime){
    return "è²©å£²ä¸­";
  }

  return "è²©å£²çµ‚äº†";
}

function formatGoodsDate(dateStr){

  const date = new Date(dateStr);

  const y = date.getFullYear();
  const m = date.getMonth() + 1;
  const d = date.getDate();
  const h = String(date.getHours()).padStart(2,"0");
  const min = String(date.getMinutes()).padStart(2,"0");

  const days = ["æ—¥","æœˆ","ç«","æ°´","æœ¨","é‡‘","åœŸ"];
  const week = days[date.getDay()];

  return `${y}å¹´${m}æœˆ${d}æ—¥(${week})${h}:${min}`;
}
  
function loadTodayContent(){

  const category = Math.random() < 0.5 ? "video" : "word";

  if(category === "video"){

    fetch(videosURL).then(r=>r.text()).then(text=>{

      const data = parseCSV(text);
      if(!data.length) return;

      const random = data[Math.floor(Math.random()*data.length)];
      const thumb = getYouTubeThumbnail(random.url);

      todayBox.innerHTML = `

        <div class="random-section-title">
          <span class="material-symbols-outlined">
            bar_chart_4_bars
          </span>
          ãƒ©ãƒ³ãƒ€ãƒ ãƒ‰ã‚ºãƒ«ç¤¾ãƒ‡ãƒ¼ã‚¿ã€å‹•ç”»ã€‘
        </div>

        <div class="random-card ${thumb ? "" : "no-image"}">

          ${thumb ? `
            <div class="random-thumb-box">
              <img src="${thumb}" class="random-thumb">
            </div>
          ` : ""}

          <div class="random-content">
            <p class="random-title">${random.title}</p>

            ${random.url && random.url.trim() !== "" ?
              `<a href="${random.url}" target="_blank" class="random-link">
                <span class="material-symbols-outlined link-icon">
                  open_in_new
                </span>
                å‹•ç”»ã‚’è¦‹ã‚‹
              </a>`
            : ""}
          </div>

        </div>
      `;

    });

  }else{

    fetch(wordsURL).then(r=>r.text()).then(text=>{

      const data = parseCSV(text);
      if(!data.length) return;

      const random = data[Math.floor(Math.random()*data.length)];

      const thumb = random.url ? getYouTubeThumbnail(random.url) : null;

      todayBox.innerHTML = `

        <div class="random-section-title">
          <span class="material-symbols-outlined">
            bar_chart_4_bars
          </span>
          ãƒ©ãƒ³ãƒ€ãƒ ãƒ‰ã‚ºãƒ«ç¤¾ãƒ‡ãƒ¼ã‚¿ã€ç”¨èªã€‘
        </div>

        <div class="random-card ${thumb ? "" : "no-image"}">

          ${thumb ? `
            <div class="random-thumb-box">
              <img src="${thumb}" class="random-thumb">
            </div>
          ` : ""}

          <div class="random-content">

            <p class="random-title">${random.word}</p>

            ${random.description ? `
              <p class="random-description">
                ${random.description}
              </p>
            ` : ""}

            ${random.url && random.url.trim() !== "" ? `
              <a href="${random.url}" target="_blank" class="random-link">
                <span class="material-symbols-outlined link-icon">
                  open_in_new
                </span>
                é–¢é€£å‹•ç”»ã‚’è¦‹ã‚‹
              </a>
            ` : ""}

          </div>

        </div>
      `;

    });

  }
}

const todayBox=document.getElementById("todayBox");

fetch(eventsURL).then(r=>r.text()).then(text=>{

  const data = parseCSV(text);
  data.sort((a,b)=>new Date(b.start_date) - new Date(a.start_date));

  let nearest = null;
  let nearestTime = Infinity;

  let nearestEnd = null;
  let nearestEndTime = Infinity;

  // æ—¥æœ¬æ™‚é–“ã®ä»Šæ—¥ï¼ˆYYYY-MM-DDï¼‰
  const todayStr = new Date().toLocaleDateString("sv-SE", {
    timeZone: "Asia/Tokyo"
  });

  let eventHTML = "";

  data.forEach(event=>{

    /* =========================
       æ—¥ä»˜è¡¨ç¤ºãƒ†ã‚­ã‚¹ãƒˆä½œæˆ
    ========================== */
    let dateText = formatEventPeriod(event.start_date, event.end_date);

    /* =========================
       æœ€æ–°ã‚¤ãƒ™ãƒ³ãƒˆåˆ¤å®š
    ========================== */
    const startStr = event.start_date;
    const startTime = new Date(startStr + "T00:00:00+09:00").getTime();

    if(startStr >= todayStr && startTime < nearestTime){
      nearestTime = startTime;
      nearest = event;
    }

    /* =========================
       çµ‚äº†é–“è¿‘ã‚¤ãƒ™ãƒ³ãƒˆåˆ¤å®šï¼ˆé–‹å‚¬ä¸­ã®ã¿ï¼‰
    ========================== */
    if(event.end_date && event.end_date.trim() !== ""){

      const startStr = event.start_date;
      const endStr   = event.end_date;

      const startTime = new Date(startStr + "T00:00:00+09:00").getTime();
      const endTime   = new Date(endStr   + "T23:59:59+09:00").getTime();
      const now       = Date.now();

      // âœ… é–‹å‚¬ä¸­ã®ã¿å¯¾è±¡
      const isOngoing = startTime <= now && endTime >= now;

      if(!isOngoing) return;

      // âœ… ä¸€ç•ªçµ‚äº†ãŒè¿‘ã„ã‚‚ã®ã‚’é¸ã¶
      if(endTime < nearestEndTime){
        nearestEndTime = endTime;
        nearestEnd = event;
      }
    }
    /* =========================
       ã‚¤ãƒ™ãƒ³ãƒˆä¸€è¦§ã‚«ãƒ¼ãƒ‰ç”Ÿæˆ
    ========================== */

    eventHTML += `
    <div class="event-card-new">

      <div class="event-img-box">
        <img src="${event.image}" class="event-img-new">
      </div>

      <div class="event-info">

        <h3 class="event-title">${event.title}</h3>

        <p class="event-meta">
          <span class="material-symbols-outlined meta-icon">calendar_month</span>
          ${dateText}
        </p>

        <p class="event-meta">
          <span class="material-symbols-outlined meta-icon">location_on</span>
          ${event.location}
        </p>

        <p class="event-meta">
          <span class="material-symbols-outlined meta-icon">description</span>
          ${event.note || ""}
        </p>

        <div class="event-links">
          ${event.link1 && event.link1.trim() !== "" ? 
            `<a href="${event.link1.trim()}" target="_blank" class="event-link-btn">
              ç‰¹è¨­ã‚µã‚¤ãƒˆ
            </a>` 
          : ""}

          ${event.link2 && event.link2.trim() !== "" ? 
            `<a href="${event.link2.trim()}" target="_blank" class="event-link-btn gray">
              å…¬å¼ã‚µã‚¤ãƒˆ
            </a>` 
          : ""}
        </div>

        <div class="event-actions">

          <button class="fav-btn ${isFav(event.title) ? 'active' : ''}"
            onclick="toggleFavorite('${event.title}')">
            â™¡ ãŠæ°—ã«å…¥ã‚Š
          </button>

          <select class="event-status"
            onchange="saveStatus('${event.title}', this.value)">
            <option value="">é¸æŠã—ãªã„</option>
            <option value="äºˆå®š" ${getStatus(event.title)==="äºˆå®š"?"selected":""}>å‚åŠ äºˆå®š</option>
            <option value="æ¸ˆ" ${getStatus(event.title)==="æ¸ˆ"?"selected":""}>å‚åŠ æ¸ˆ</option>
          </select>

        </div>

      </div>
    </div>
    `;

  });

  // ä¸€è¦§è¡¨ç¤º
  document.getElementById("eventList").innerHTML = eventHTML;

  /* =========================
     æœ€æ–°ã‚¤ãƒ™ãƒ³ãƒˆè¡¨ç¤º
  ========================== */
  if(nearest){

    document.getElementById("latestEvent").innerHTML = `
      <div class="latest-wrapper">

        <div id="countdown" class="latest-countdown"></div>

        <div class="latest-flex">

          <img src="${nearest.image}" class="latest-thumb">

          <div class="latest-meta">

            <h3 class="latest-title">${nearest.title}</h3>

            <p class="meta-row">
              <span class="material-symbols-outlined meta-icon">calendar_month</span>
              ${formatEventPeriod(nearest.start_date, nearest.end_date)}
            </p>

            <p class="meta-row">
              <span class="material-symbols-outlined meta-icon">location_on</span>
              ${nearest.location}
            </p>

            <p class="meta-row">
              <span class="material-symbols-outlined meta-icon">description</span>
              ${nearest.note || ""}
            </p>

            <p class="latest-note">
              å…¬å¼ãƒªãƒ³ã‚¯ãƒ»ãƒã‚¤ãƒªã‚¹ãƒˆè¿½åŠ ã¯ã‚¤ãƒ™ãƒ³ãƒˆãƒšãƒ¼ã‚¸ã‚’ã”è¦§ãã ã•ã„
            </p>

          </div>
        </div>

      </div>
    `;

    startCountdown(nearest.start_date);
  }

  /* =========================
     çµ‚äº†é–“è¿‘ã‚¤ãƒ™ãƒ³ãƒˆè¡¨ç¤º
  ========================== */
  if(nearestEnd){

    document.getElementById("endingSoonEvent").innerHTML = `
      <div class="latest-wrapper">

        <div id="endingCountdown" class="latest-countdown"></div>

        <div class="latest-flex">

          <img src="${nearestEnd.image}" class="latest-thumb">

          <div class="latest-meta">

            <h3 class="latest-title">${nearestEnd.title}</h3>

            <p class="meta-row">
              <span class="material-symbols-outlined meta-icon">calendar_month</span>
              ${formatEventPeriod(nearestEnd.start_date, nearestEnd.end_date)}
            </p>

            <p class="meta-row">
              <span class="material-symbols-outlined meta-icon">location_on</span>
              ${nearestEnd.location}
            </p>

            <p class="meta-row">
              <span class="material-symbols-outlined meta-icon">description</span>
              ${nearestEnd.note || ""}
            </p>

            <p class="latest-note">
              å…¬å¼ãƒªãƒ³ã‚¯ãƒ»ãƒã‚¤ãƒªã‚¹ãƒˆè¿½åŠ ã¯ã‚¤ãƒ™ãƒ³ãƒˆãƒšãƒ¼ã‚¸ã‚’ã”è¦§ãã ã•ã„
            </p>

          </div>
        </div>

      </div>
    `;

    startEndingCountdown(nearestEnd.end_date);
  }

});

fetch(goodsURL)
  .then(res => res.text())
  .then(text => {

    const data = parseCSV(text);

    // ğŸ”¥ ã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹è‡ªå‹•åˆ¤å®š
    data.forEach(item=>{
      item.autoStatus = getGoodsSaleStatus(item.start_datetime, item.end_datetime);
    });

    // ğŸ”¥ ä¸¦ã³æ›¿ãˆ
    const order = { "è²©å£²ä¸­":0, "è²©å£²å‰":1, "è²©å£²çµ‚äº†":2 };
    data.sort((a,b)=> order[a.autoStatus] - order[b.autoStatus]);

    let html = "";

    data.forEach(item => {

      const status = item.autoStatus;
      const statusClass =
        status === "è²©å£²ä¸­" ? "sale-now" :
        status === "è²©å£²å‰" ? "sale-before" :
        "sale-end";

      html += `
      <div class="event-card-new">

        <div class="event-img-box">
          <img src="${item.image}" class="event-img-new">
        </div>

        <div class="event-info">

          <h3 class="event-title">${item.series}</h3>

          <p class="event-meta">
            <span class="material-symbols-outlined meta-icon">schedule</span>
            ${item.start_datetime || ""} ã€œ ${item.end_datetime || ""}
          </p>

          <p class="event-meta">
            <span class="material-symbols-outlined meta-icon">store</span>
            ${item.site_name || ""}
          </p>

          <p class="event-meta">
            <span class="material-symbols-outlined meta-icon">description</span>
            ${item.description || ""}
          </p>

          <p class="event-meta ${statusClass}">
            <span class="material-symbols-outlined meta-icon">sell</span>
            è²©å£²çŠ¶æ…‹ï¼š${status}
          </p>

          <div class="event-links">
            ${item.link1 ? `
              <a href="${item.link1}" target="_blank" class="event-link-btn">
                ã”è³¼å…¥ã¯ã“ã¡ã‚‰
              </a>
            ` : ""}

            ${item.link2 ? `
              <a href="${item.link2}" target="_blank" class="event-link-btn gray">
                å•†å“èª¬æ˜ãƒšãƒ¼ã‚¸
              </a>
            ` : ""}
          </div>

          <div class="event-actions">

            <button class="fav-btn ${isGoodsFav(item.series) ? 'active' : ''}"
              onclick="toggleGoodsFavorite('${item.series}')">
              â™¡ ãŠæ°—ã«å…¥ã‚Š
            </button>

            <select class="event-status"
              onchange="saveGoodsStatus('${item.series}', this.value)">
              <option value="">é¸æŠã—ãªã„</option>
              <option value="äºˆå®š" ${getGoodsStatus(item.series)==="äºˆå®š"?"selected":""}>
                è³¼å…¥äºˆå®š
              </option>
              <option value="æ¸ˆ" ${getGoodsStatus(item.series)==="æ¸ˆ"?"selected":""}>
                è³¼å…¥æ¸ˆ
              </option>
            </select>

          </div>

        </div>
      </div>
      `;
    });

    document.getElementById("goodsList").innerHTML = html;
  });

fetch(plannedURL).then(r=>r.text()).then(text=>{
const data=parseCSV(text);

const box1 = document.getElementById("plannedFeatures");
const box2 = document.getElementById("plannedFeaturesPage");

if(!data.length){
if(box1) box1.innerHTML="<p>ç¾åœ¨æ¤œè¨ä¸­ã®æ©Ÿèƒ½ã¯ã‚ã‚Šã¾ã›ã‚“ã€‚</p>";
if(box2) box2.innerHTML="<p>ç¾åœ¨æ¤œè¨ä¸­ã®æ©Ÿèƒ½ã¯ã‚ã‚Šã¾ã›ã‚“ã€‚</p>";
return;
}

data.forEach(item=>{

const html = `
<div class="planned-card" data-status="${item.status}">
  <div class="planned-header">
    <span class="planned-title">${item.title}</span>
    <span class="planned-badge">${item.status}</span>
  </div>
  ${item.note ? `<div class="planned-note">${item.note}</div>` : ""}
</div>
`;

if(box1) box1.innerHTML += html;
if(box2) box2.innerHTML += html;

});
});

  
function startCountdown(eventDateStr){

  const eventDate = new Date(eventDateStr + "T00:00:00+09:00");

  const timer = setInterval(()=>{

    const now = new Date();

    // ğŸ”¥ æ—¥æœ¬æ™‚é–“ã§ä»Šæ—¥ã®æ—¥ä»˜ã‚’å–å¾—
    const todayStr = now.toLocaleDateString("sv-SE", { timeZone: "Asia/Tokyo" });
    const eventStr = eventDateStr; // ä¾‹: "2026-02-28"

    // ğŸ”¥ ä»Šæ—¥ãŒé–‹å‚¬æ—¥ãªã‚‰
    if(todayStr === eventStr){
      document.getElementById("countdown").innerHTML =
        `<span class="material-symbols-outlined countdown-icon">timer</span>
         æœ¬æ—¥é–‹å‚¬ï¼`;
      clearInterval(timer);
      return;
    }

    const diff = eventDate - now;

    // ğŸ”¥ é–‹å‚¬æ—¥ã‚’éããŸã‚‰ä½•ã‚‚è¡¨ç¤ºã—ãªã„
    if(diff < 0){
      document.getElementById("countdown").innerHTML = "";
      clearInterval(timer);
      return;
    }

    const days = Math.floor(diff / 86400000);
    const hours = Math.floor((diff % 86400000) / 3600000);
    const minutes = Math.floor((diff % 3600000) / 60000);
    const seconds = Math.floor((diff % 60000) / 1000);

    document.getElementById("countdown").innerHTML =
      `<span class="material-symbols-outlined countdown-icon">calendar_clock</span>
       ã‚ã¨ ${days}æ—¥ ${hours}æ™‚é–“ ${minutes}åˆ† ${seconds}ç§’ ã§é–‹å‚¬ï¼`;

  },1000);
}

function startEndingCountdown(endDate){

  function update(){

    const now = new Date();

    const todayStr =
      now.getFullYear() + "-" +
      String(now.getMonth()+1).padStart(2,"0") + "-" +
      String(now.getDate()).padStart(2,"0");

    const countdownEl = document.getElementById("endingCountdown");

    // ğŸ”´ ä»Šæ—¥ãŒçµ‚äº†æ—¥
    if(todayStr === endDate){
      countdownEl.innerHTML =
        `<span class="material-symbols-outlined countdown-icon">timer</span>
         æœ¬æ—¥çµ‚äº†ï¼`;
      return;
    }

    // ğŸŸ  ã¾ã çµ‚äº†æ—¥å‰
    const end = new Date(endDate + "T00:00:00+09:00");
    const diff = end.getTime() - now.getTime();

    if(diff > 0){

      const days = Math.floor(diff / (1000*60*60*24));
      const hours = Math.floor((diff / (1000*60*60)) % 24);
      const minutes = Math.floor((diff / (1000*60)) % 60);
      const seconds = Math.floor((diff / 1000) % 60);

      countdownEl.innerHTML =
        `<span class="material-symbols-outlined countdown-icon">calendar_clock</span>
         ã‚ã¨ ${days}æ—¥ ${hours}æ™‚é–“ ${minutes}åˆ† ${seconds}ç§’ ã§çµ‚äº†ï¼`;

      return;
    }

    // âš« ç¿Œæ—¥ã«ãªã£ãŸã‚‰æ¬¡ã®ã‚¤ãƒ™ãƒ³ãƒˆã¸
    location.reload();
  }

  update();
  setInterval(update,1000);
}
  
function getYouTubeThumbnail(url){

if(!url) return "";

// é€šå¸¸ã®watch?v=å½¢å¼
let videoId = null;

if(url.includes("watch?v=")){
videoId = url.split("watch?v=")[1].split("&")[0];
}

// youtu.beå½¢å¼
if(url.includes("youtu.be/")){
videoId = url.split("youtu.be/")[1].split("?")[0];
}

if(!videoId) return "";

return `https://img.youtube.com/vi/${videoId}/hqdefault.jpg`;
}
  
function filterPlanned(status){

const buttons = document.querySelectorAll(".filter-btn");
buttons.forEach(btn=>btn.classList.remove("active"));

event.target.classList.add("active");

const cards = document.querySelectorAll(".planned-card");

cards.forEach(card=>{
if(status==="all"){
card.style.display="block";
}else{
if(card.dataset.status===status){
card.style.display="block";
}else{
card.style.display="none";
}
}
});

}

// ===== ãŠæ°—ã«å…¥ã‚Š =====
function getFavorites(){
  return JSON.parse(localStorage.getItem("favorites") || "[]");
}

function isFav(title){
  return getFavorites().includes(title);
}

function toggleFavorite(title){
  let favs = getFavorites();

  if(favs.includes(title)){
    favs = favs.filter(t=>t!==title);
  }else{
    favs.push(title);
  }

  localStorage.setItem("favorites", JSON.stringify(favs));
  location.reload();
}


// ===== å‚åŠ ã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹ =====
function getStatus(title){
  const data = JSON.parse(localStorage.getItem("eventStatus") || "{}");
  return data[title] || "";
}

function saveStatus(title,value){
  const data = JSON.parse(localStorage.getItem("eventStatus") || "{}");
  data[title] = value;
  localStorage.setItem("eventStatus", JSON.stringify(data));
}

function loadMyList(filter="all"){

  if(currentMyListType === "event"){
    loadEventMyList(filter);
  }else{
    loadGoodsMyList(filter);
  }
}
                       
function loadEventMyList(filter="all"){

  fetch(eventsURL).then(r=>r.text()).then(text=>{
    const data=parseCSV(text);

    const favs = JSON.parse(localStorage.getItem("favorites") || "[]");
    const statusData = JSON.parse(localStorage.getItem("eventStatus") || "{}");

    let html="";
    let countParticipated=0;

    data.forEach(event=>{

      const isFavorite = favs.includes(event.title);
      const status = statusData[event.title] || "";

      if(status==="æ¸ˆ") countParticipated++;

      let show=false;

      if(filter==="all"){
        if(isFavorite || status==="äºˆå®š" || status==="æ¸ˆ"){
          show=true;
        }
      }
      else if(filter==="fav"){
        show=isFavorite;
      }
      else if(filter==="äºˆå®š"){
        show=status==="äºˆå®š";
      }
      else if(filter==="æ¸ˆ"){
        show=status==="æ¸ˆ";
      }

      if(!show) return;

      html+=`
        <div class="mylist-card-new">

          <div class="mylist-flex">

            <img src="${event.image}" class="mylist-thumb">

            <div class="mylist-meta">

              <h3 class="mylist-title">${event.title}</h3>

              <p class="meta-row">
                <span class="material-symbols-outlined meta-icon">calendar_month</span>
                ${formatEventPeriod(event.start_date,event.end_date)}
              </p>

              <p class="meta-row">
                <span class="material-symbols-outlined meta-icon">location_on</span>
                ${event.location}
              </p>

              <p class="meta-row">
                <span class="material-symbols-outlined meta-icon">description</span>
                ${event.note || ""}
              </p>

              <p class="latest-note">
                å…¬å¼ãƒªãƒ³ã‚¯ãƒ»ãƒã‚¤ãƒªã‚¹ãƒˆè¿½åŠ ã¯ã‚¤ãƒ™ãƒ³ãƒˆãƒšãƒ¼ã‚¸ã‚’ã”è¦§ãã ã•ã„
              </p>

              ${(isFavorite || status) ? `
                <div class="my-status-box">

                  ${isFavorite ? `
                    <span class="my-badge fav-badge">
                      â™¡ ãŠæ°—ã«å…¥ã‚Š
                    </span>
                  ` : ""}

                  ${status ? `
                    <span class="my-badge status-badge">
                      ${status==="äºˆå®š"?"å‚åŠ äºˆå®š":"å‚åŠ æ¸ˆ"}
                    </span>
                  ` : ""}

                </div>
              ` : ""}

            </div>

          </div>

        </div>
      `;
    });

    document.getElementById("mylist-container").innerHTML=
      html || "<p>è©²å½“ã‚¤ãƒ™ãƒ³ãƒˆãªã—</p>";

    document.getElementById("mylist-count").innerText=
      `ã“ã‚Œã¾ã§å‚åŠ ã—ãŸã‚¤ãƒ™ãƒ³ãƒˆï¼š${countParticipated}ä»¶`;

  });
}

function loadGoodsMyList(filter="all"){

  fetch(goodsURL).then(r=>r.text()).then(text=>{

    const data = parseCSV(text);

    const favs = getGoodsFavorites();
    const statusData = JSON.parse(localStorage.getItem("goodsStatus") || "{}");

    let html = "";
    let countPurchased = 0;

    data.forEach(item=>{

      const title = item.series; // â† çµ±ä¸€ï¼

      const isFavorite = favs.includes(title);
      const status = statusData[title] || "";

      // ğŸ”¥ è²©å£²çŠ¶æ…‹è‡ªå‹•åˆ¤å®š
      const saleStatus = getGoodsSaleStatus(
        item.start_datetime,
        item.end_datetime
      );

      const statusClass =
        saleStatus === "è²©å£²ä¸­" ? "sale-now" :
        saleStatus === "è²©å£²å‰" ? "sale-before" :
        "sale-end";

      if(status==="æ¸ˆ") countPurchased++;

      // ãƒ•ã‚£ãƒ«ã‚¿ãƒ¼
      if(
        filter==="fav" && !isFavorite ||
        filter==="äºˆå®š" && status!=="äºˆå®š" ||
        filter==="æ¸ˆ" && status!=="æ¸ˆ"
      ){
        return;
      }

      // ã€Œã™ã¹ã¦ã€ã¯ãŠæ°—ã«å…¥ã‚Š or ã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹ã‚ã‚‹ã‚‚ã®ã®ã¿
      if(filter==="all" && !isFavorite && !status){
        return;
      }

      html+=`
      <div class="mylist-card">

        <div class="mylist-img-box">
          <img src="${item.image}" class="mylist-img">
        </div>

        <div class="mylist-info">

          <h3 class="mylist-title">${title}</h3>

          <p class="meta-row">
            <span class="material-symbols-outlined meta-icon">schedule</span>
            ${item.start_datetime || ""} ã€œ ${item.end_datetime || ""}
          </p>

          <p class="meta-row">
            <span class="material-symbols-outlined meta-icon">store</span>
            ${item.site_name || ""}
          </p>

          <p class="meta-row">
            <span class="material-symbols-outlined meta-icon">description</span>
            ${item.description || ""}
          </p>

          <p class="meta-row ${statusClass}">
            <span class="material-symbols-outlined meta-icon">sell</span>
            è²©å£²çŠ¶æ…‹ï¼š${saleStatus}
          </p>

          <p class="latest-note">
            å…¬å¼ãƒªãƒ³ã‚¯ãƒ»ãƒã‚¤ãƒªã‚¹ãƒˆè¿½åŠ ã¯ã‚¤ãƒ™ãƒ³ãƒˆãƒšãƒ¼ã‚¸ã‚’ã”è¦§ãã ã•ã„
          </p>

          ${(isFavorite || status) ? `
            <div class="my-status-box">

              ${isFavorite ? `
                <span class="my-badge fav-badge">
                  â™¡ ãŠæ°—ã«å…¥ã‚Š
                </span>
              ` : ""}

              ${status ? `
                <span class="my-badge status-badge">
                  ${status==="äºˆå®š"?"è³¼å…¥äºˆå®š":"è³¼å…¥æ¸ˆ"}
                </span>
              ` : ""}

            </div>
          ` : ""}

        </div>

      </div>
      `;
    });

    document.getElementById("mylist-container").innerHTML =
      html || "<p>è©²å½“ã‚°ãƒƒã‚ºãªã—</p>";

    document.getElementById("mylist-count").innerText =
      `è³¼å…¥æ¸ˆã‚°ãƒƒã‚ºï¼š${countPurchased}ä»¶`;

  });
}
  
function filterMyList(type, el){

  document.querySelectorAll(".filter-btn")
    .forEach(btn=>btn.classList.remove("active"));

  el.classList.add("active");

  loadMyList(type);
}

function toggleSidebar(){
  const sidebar = document.getElementById("sidebar");
  const overlay = document.getElementById("sidebarOverlay");
  const icon = document.getElementById("menuIcon");
  const isMobile = window.innerWidth <= 768;

  if(isMobile){
    sidebar.classList.toggle("open");
    overlay.classList.toggle("active");

    if(sidebar.classList.contains("open")){
      icon.textContent = "close";
    }else{
      icon.textContent = "menu";
    }

  }else{
    sidebar.classList.toggle("collapsed");

    if(sidebar.classList.contains("collapsed")){
      icon.textContent = "menu";
    }else{
      icon.textContent = "close";
    }
  }
}

function closeSidebar(){
  document.getElementById("sidebar").classList.remove("open");
  document.getElementById("sidebarOverlay").classList.remove("active");
  document.getElementById("menuIcon").textContent = "menu";
}
  
document.querySelectorAll("#sidebar button").forEach(btn=>{
  btn.addEventListener("click", function(){

    const isMobile = window.innerWidth <= 768;

    if(isMobile){
      document.getElementById("sidebar").classList.remove("open");
      document.getElementById("sidebarOverlay").classList.remove("active");

      // ãƒãƒ³ãƒãƒ¼ã‚¬ãƒ¼ã‚’æˆ»ã™
      document.getElementById("menuIcon").textContent = "menu";
    }

  });
});

function loadNews(){

  fetch(newsURL).then(r=>r.text()).then(text=>{

    const data = parseCSV(text);
    if(!data.length) return;

    const todayStr = new Date().toLocaleDateString("sv-SE", {
      timeZone: "Asia/Tokyo"
    });

    let html = "";
    let hasNews = false;

    data.forEach(news=>{

      if(!news.start_date) return;

      const start = news.start_date;
      const end = news.end_date || "9999-12-31";

      if(start <= todayStr && todayStr <= end){

        hasNews = true;

        const startDate = new Date(start + "T00:00:00+09:00");
        const todayDate = new Date(todayStr + "T00:00:00+09:00");

        const diffDays = Math.floor(
          (todayDate - startDate) / (1000 * 60 * 60 * 24)
        );

        const isNew = diffDays >= 0 && diffDays < 5;

        html += `
        <div class="news-card">

          <div class="news-header">

            <span class="material-symbols-outlined news-icon">
              feed
            </span>

            <span class="news-date">
              ${start}
            </span>

            ${isNew ? `
              <span class="news-badge">
                NEW
              </span>
            ` : ""}

          </div>

          <h3 class="news-title">
            ${news.title}
          </h3>

          <p class="news-content">
            ${news.content}
          </p>

          ${news.link && news.link.trim() !== "" ? `
            <a href="${news.link}" target="_blank" class="news-link">
              <span class="material-symbols-outlined link-icon">
                open_in_new
              </span>
              è©³ã—ãè¦‹ã‚‹
            </a>
          ` : ""}

        </div>
        `;
      }

    });

    if(hasNews){
      document.getElementById("newsBox").innerHTML = `
        <div class="news-section-title">
          <span class="material-symbols-outlined">
            campaign
          </span>
          ãƒ‰ã‚ºãƒ«ç¤¾ã®æœ€æ–°ãƒ‹ãƒ¥ãƒ¼ã‚¹
        </div>
        ${html}
      `;
    }else{
      document.getElementById("newsBox").innerHTML = "";
    }

  });
}

/* ===== ã‚°ãƒƒã‚º ãŠæ°—ã«å…¥ã‚Š ===== */
function getGoodsFavorites(){
  return JSON.parse(localStorage.getItem("goodsFavorites") || "[]");
}

function isGoodsFav(title){
  return getGoodsFavorites().includes(title);
}

function toggleGoodsFavorite(title){
  let favs = getGoodsFavorites();

  if(favs.includes(title)){
    favs = favs.filter(t=>t!==title);
  }else{
    favs.push(title);
  }

  localStorage.setItem("goodsFavorites", JSON.stringify(favs));
  location.reload();
}


/* ===== ã‚°ãƒƒã‚º è³¼å…¥ã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹ ===== */
function getGoodsStatus(title){
  const data = JSON.parse(localStorage.getItem("goodsStatus") || "{}");
  return data[title] || "";
}

function saveGoodsStatus(title,value){
  const data = JSON.parse(localStorage.getItem("goodsStatus") || "{}");
  data[title] = value;
  localStorage.setItem("goodsStatus", JSON.stringify(data));
}

let currentMyListType = "event";

function switchMyListType(type){

  currentMyListType = type;

  document.querySelectorAll(".mylist-type-tabs button")
    .forEach(btn=>btn.classList.remove("active-type"));

  document.getElementById("tab-"+type)
    .classList.add("active-type");

  /* ğŸ”¥ ãƒ•ã‚£ãƒ«ã‚¿ãƒ¼åã‚’å¤‰æ›´ */
  const planLabel = document.getElementById("filter-plan-label");
  const doneLabel = document.getElementById("filter-done-label");

  if(type==="event"){
    planLabel.textContent = "å‚åŠ äºˆå®š";
    doneLabel.textContent = "å‚åŠ æ¸ˆ";
  }else{
    planLabel.textContent = "è³¼å…¥äºˆå®š";
    doneLabel.textContent = "è³¼å…¥æ¸ˆ";
  }

  loadMyList("all");
}

function getGoodsSaleStatus(start, end){

  const now = new Date();

  const startDate = new Date(start);
  const endDate = new Date(end);

  if(now < startDate) return "è²©å£²å‰";
  if(now > endDate) return "è²©å£²çµ‚äº†";
  return "è²©å£²ä¸­";
}
  
loadNews();
loadTodayContent();
</script>

</main>
</div>

</body>
</html>






















